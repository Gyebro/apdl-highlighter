<!DOCTYPE html><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta name="date" content="2017-07-14 18:40:00-04:00"><title>5.2.&nbsp;Derivation of Electromagnetic Matrices</title><link rel="stylesheet" type="text/css" href="basic.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="ans_thry.html" title="Mechanical APDL Theory Reference"><link rel="up" href="thy_emg.html" title="Chapter&nbsp;5:&nbsp;Electromagnetics"><link rel="prev" href="thy_emg1.html" title="5.1.&nbsp;Electromagnetic Field Fundamentals"><link rel="next" href="thy_emg3.html" title="5.3.&nbsp;Electromagnetic Field Evaluations"><script type="text/javascript"><!--
function toggleElementDisplay (id) {
  var elem = document.getElementById(id);
  if (elem.style.display != "block") {
    elem.style.display = "block";
  } else {
    elem.style.display = "none";
  }
}
//--></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" title="5.2.&nbsp;Derivation of Electromagnetic Matrices"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PkK8f124lmm"></a>5.2.&nbsp;Derivation of Electromagnetic Matrices</h2></div></div></div><p>The finite element matrix equations can be derived by variational
principles.  These equations exist for linear and nonlinear material
behavior as well as static and transient response.  Based on the presence
of linear or nonlinear materials (as well as other factors), the program
chooses the appropriate Newton-Raphson method.  The user may select
another method with the (<a href="../ans_cmd/Hlp_C_NROPT.html" class="olink"><span class="command"><strong>NROPT</strong></span></a> command (see <a class="xref" href="thy_tool10.html" title="14.11.&nbsp;Newton-Raphson Procedure">Newton-Raphson Procedure</a>)).  When transient affects are to be considered
a first order time integration scheme must be involved (<a href="../ans_cmd/Hlp_C_TIMINT.html" class="olink"><span class="command"><strong>TIMINT</strong></span></a> command (see <a class="xref" href="thy_anproc2.html" title="15.2.&nbsp;Transient Analysis">Transient Analysis</a>)). </p><div class="sect2" title="5.2.1.&nbsp;Magnetic Scalar Potential"><div class="titlepage"><div><div><h3 class="title"><a name="elecmagspot"></a>5.2.1.&nbsp;Magnetic Scalar Potential</h3></div></div></div><a class="indexterm" name="d0e18025"></a><p>The scalar potential formulations are restricted to static field
analysis with partial orthotropic nonlinear permeability.  The degrees
of freedom (DOFs), element matrices, and load vectors are presented
here in the following form (Zienkiewicz(<a class="xref" href="thy_biblio.html#Qoupf19emlg" title="&#34;Three-Dimensional Magnetic Field Determination Using a Scalar Potential - A Finite Element Solution&#34;">[75]</a>), Chari(<a class="xref" href="thy_biblio.html#Ynupf182mlg" title="&#34;Finite Element Analysis of Magneto-Mechanical Devices&#34;">[73]</a>), and Gyimesi(<a class="xref" href="thy_biblio.html#xxcgf134mlg" title="&#34;Application of the General Potential Formulation in the ANSYS&reg;Program&#34;">[141]</a>)): </p><div class="sect3" title="5.2.1.1.&nbsp;Degrees of freedom"><div class="titlepage"><div><div><h4 class="title"><a name="elecdof"></a>5.2.1.1.&nbsp;Degrees of freedom</h4></div></div></div><table border="0" summary="Simple list" class="simplelist"><tr><td>{&#966;<sub>e</sub>} = magnetic scalar potentials
at the nodes of the element (input/output as MAG)</td></tr></table></div><div class="sect3" title="5.2.1.2.&nbsp;Coefficient Matrix"><div class="titlepage"><div><div><h4 class="title"><a name="eleccoeffmat"></a>5.2.1.2.&nbsp;Coefficient Matrix</h4></div></div></div><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq1electromatnov2801"></a><div><img src="graphics/thyeq1electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;85)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq2electromatnov2801"></a><div><img src="graphics/thyeq2electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;86)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq3electromatnov2801"></a><div><img src="graphics/thyeq3electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;87)</b></p></td></tr></table></div><div class="sect3" title="5.2.1.3.&nbsp;Applied Loads"><div class="titlepage"><div><div><h4 class="title"><a name="elecapplyload"></a>5.2.1.3.&nbsp;Applied Loads</h4></div></div></div><a class="indexterm" name="d0e18060"></a><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq4electromatnov2801"></a><div><img src="graphics/thyeq4electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;88)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{N} = element shape functions (&#966; = {N}<sup>T</sup>{&#966;<sub>e</sub>})</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-9.000000px"><img src="graphics/eq71f08ca5-6d56-4afa-9fcb-1d9a5f9ced0a.svg"></span> </td></tr><tr><td>vol = volume of the element </td></tr><tr><td>{H<sub>g</sub>} = preliminary or &#8220;guess&#8221;
magnetic field (see <a class="xref" href="thy_emg1.html" title="5.1.&nbsp;Electromagnetic Field Fundamentals">Electromagnetic Field Fundamentals</a>) </td></tr><tr><td>{H<sub>c</sub>} = coercive force vector (input
as MGXX, MGYY, MGZZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command)) </td></tr><tr><td>[&#956;] = permeability matrix (derived from input material
property MURX, MURY, and MURZ (<a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command) and/or
material curve B versus H (accessed with <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a>,BH))(see <a class="xref" href="thy_emg1.html#thyeq7electronov2801" title="(5&#8211;7)">Equation&nbsp;5&#8211;7</a>, <a class="xref" href="thy_emg1.html#thyeq8electronov2801" title="(5&#8211;8)">Equation&nbsp;5&#8211;8</a>, and <a class="xref" href="thy_emg1.html#thyeq9electronov2801" title="(5&#8211;9)">Equation&nbsp;5&#8211;9</a>) </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eqb1067c20-a700-4fa4-baf2-37a9cf1a9127.svg"></span> = derivative of permeability with respect to magnitude
of the magnetic field intensity (derived from the input material property
curve B versus H (accessed with <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a>,BH)) </td></tr></table><p>
</p><p>The material property curve is input in the form of B values
versus H values and is then converted to a spline fit curve of &#956;
versus H from which the permeability terms &#956;<sub>h</sub> and 
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq62389796-6ef4-4ad1-937e-9fc6f2799ab4.svg"></span> are evaluated.  </p><p>The coercive force vector is related to the remanent intrinsic
magnetization vector as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq5electromatnov2801"></a><div><img src="graphics/thyeq5electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;89)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>&#956;<sub>o</sub> = permeability of free space
(input as MUZRO on <a href="../ans_cmd/Hlp_C_EMUNIT.html" class="olink"><span class="command"><strong>EMUNIT</strong></span></a> command) </td></tr></table><p>
</p><p>The Newton-Raphson solution technique (<span class="italic"><em>Option</em></span> on the <a href="../ans_cmd/Hlp_C_NROPT.html" class="olink"><span class="command"><strong>NROPT</strong></span></a> command) is necessary
for nonlinear analyses.  Adaptive descent is also recommended (<span class="italic"><em>Adaptky</em></span> on the <a href="../ans_cmd/Hlp_C_NROPT.html" class="olink"><span class="command"><strong>NROPT</strong></span></a> command).
 When adaptive descent is used <a class="xref" href="thy_emg2.html#thyeq1electromatnov2801" title="(5&#8211;85)">Equation&nbsp;5&#8211;85</a> becomes: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq6electromatnov2801"></a><div><img src="graphics/thyeq6electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;90)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>&#958; = descent parameter (see <a class="xref" href="thy_tool10.html" title="14.11.&nbsp;Newton-Raphson Procedure">Newton-Raphson Procedure</a>) </td></tr></table><p>
</p></div></div><div class="sect2" title="5.2.2.&nbsp;Magnetic Vector Potential"><div class="titlepage"><div><div><h3 class="title"><a name="elecmagvecpot"></a>5.2.2.&nbsp;Magnetic Vector Potential</h3></div></div></div><a class="indexterm" name="d0e18184"></a><p>The vector potential formulation is applicable to both static
and dynamic fields with partial orthotropic nonlinear permeability.
 The basic equation to be solved is of the form:  </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq7electromatnov2801"></a><div><img src="graphics/thyeq7electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;91)</b></p></td></tr></table><p>The terms of this equation are defined below (Biro(<a class="xref" href="thy_biblio.html#xKghf23mlg" title="&#34;On the Use of the Magnetic Vector Potential in the Finite Element Analysis of Three-Dimensional Eddy Currents&#34;">[120]</a>)). </p><div class="sect3" title="5.2.2.1.&nbsp;Degrees of Freedom"><div class="titlepage"><div><div><h4 class="title"><a name="elecdegoff"></a>5.2.2.1.&nbsp;Degrees of Freedom</h4></div></div></div><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq8electromatnov2801"></a><div><img src="graphics/thyeq8electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;92)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>
<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq328bdd13-5b31-48da-acb8-c181ad7b6829.svg"></span> = magnetic
vector potentials (input/output as AZ) </td></tr><tr><td>
<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq42ea3163-5b5d-42f1-a29f-7818542ee5c7.svg"></span> = time
integrated electric scalar potential <span class="inlineequation" style="&#xA;          vertical-align:-9.000000px"><img src="graphics/eqac51dd84-fd22-407f-b537-4cfdc612706b.svg"></span> (input/output as VOLT) </td></tr></table><p>
</p><p>The VOLT degree of freedom is a time integrated electric potential
to allow for symmetric matrices. </p></div><div class="sect3" title="5.2.2.2.&nbsp;Coefficient Matrices"><div class="titlepage"><div><div><h4 class="title"><a name="elececefmatric"></a>5.2.2.2.&nbsp;Coefficient Matrices</h4></div></div></div><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq9electromatnov2801"></a><div><img src="graphics/thyeq9electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;93)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq10electromatnov2801"></a><div><img src="graphics/thyeq10electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;94)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq11electromatnov2801"></a><div><img src="graphics/thyeq11electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;95)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq13electromatnov2801"></a><div><img src="graphics/thyeq13electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;96)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq14electromatnov2801"></a><div><img src="graphics/thyeq14electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;97)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq15electromatnov2801"></a><div><img src="graphics/thyeq15electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;98)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq16electromatnov2801"></a><div><img src="graphics/thyeq16electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;99)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq17electromatnov2801"></a><div><img src="graphics/thyeq17electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;100)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq18electromatnov2801"></a><div><img src="graphics/thyeq18electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;101)</b></p></td></tr></table></div><div class="sect3" title="5.2.2.3.&nbsp;Applied Loads"><div class="titlepage"><div><div><h4 class="title"><a name="elecapplds"></a>5.2.2.3.&nbsp;Applied Loads</h4></div></div></div><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq19electromatnov2801"></a><div><img src="graphics/thyeq19electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;102)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq20electromatnov2801"></a><div><img src="graphics/thyeq20electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;103)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq21electromatnov2801"></a><div><img src="graphics/thyeq21electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;104)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq22electromatnov2801"></a><div><img src="graphics/thyeq22electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;105)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq23electromatnov2801"></a><div><img src="graphics/thyeq23electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;106)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>[N<sub>A</sub>] = matrix of element shape functions
for {A} 
<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eqf34f138c-6f32-4a0d-9f32-ee759c7b1d61.svg"></span>
</td></tr><tr><td>[N] = vector of element shape functions for {V} (V = {N}<sup>T</sup>{V<sub>e</sub>}) </td></tr><tr><td>{J<sub>s</sub>} = source current density vector
(input as JS on <a href="../ans_cmd/Hlp_C_BFE.html" class="olink"><span class="command"><strong>BFE</strong></span></a> command) </td></tr><tr><td>{J<sub>t</sub>} = total current density vector (input as JS on
        <a href="../ans_cmd/Hlp_C_BFE.html" class="olink"><span class="command"><strong>BFE</strong></span></a> command) </td></tr><tr><td>vol = volume of the element </td></tr><tr><td>{H<sub>c</sub>} = coercive force vector (input
as MGXX, MGYY, MGZZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command) </td></tr><tr><td>&#957;<sub>o</sub> = reluctivity of free space
(derived from value using MUZRO on   <a href="../ans_cmd/Hlp_C_EMUNIT.html" class="olink"><span class="command"><strong>EMUNIT</strong></span></a> command) </td></tr><tr><td>[&#957;] = partially orthotropic reluctivity matrix (inverse
of [&#956;], derived from input material property curve B versus H (input
using <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a>,BH command)) </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-16.000000px"><img src="graphics/eqaf338acc-ac95-4bda-97c6-4ae3a4c9b5fb.svg"></span>= derivative
of reluctivity with respect to the magnitude of magnetic flux squared
(derived from input material property curve B versus H (input using <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a>,BH command)) </td></tr><tr><td>[&#963;] = orthotropic conductivity (input as RSVX, RSVY, RSVZ
on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command (inverse)) (see <a class="xref" href="thy_emg1.html#thyeq12electronov2801" title="(5&#8211;12)">Equation&nbsp;5&#8211;12</a>). </td></tr><tr><td>{v} = velocity vector </td></tr></table><p>
</p><p>The coercive force vector is related to the remanent intrinsic
magnetization vector as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq24electromatnov2801"></a><div><img src="graphics/thyeq24electromatnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;107)</b></p></td></tr></table><p>The material property curve is input in the form of B values
versus H values and is then converted to a spline fit curve of &#957;
versus |B|<sup>2</sup> from which the isotropic reluctivity
terms &#957;<sub>h</sub> and 
<span class="inlineequation" style="&#xA;          vertical-align:-16.000000px"><img src="graphics/eq054c6772-e7d4-4684-a4d1-9c48e5210394.svg"></span> are evaluated. </p><p>The above element matrices and load vectors are presented for the most general case of a
     vector potential analysis. Many simplifications can be made depending on the conditions of the
     specific problem. Restricting the formulation to 2-D, there is only one component of the vector
     potential (AZ).</p><p>Combining some of the above equations, the variational equilibrium
equations may be written as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq104electronov2701"></a><div><img src="graphics/thyeq104electronov2701.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;108)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq105electronov2701"></a><div><img src="graphics/thyeq105electronov2701.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;109)</b></p></td></tr></table><p>Here T denotes transposition. </p><p>Static analyses require only the magnetic vector potential degrees
of freedom (KEYOPT controlled) and the K coefficient matrices.  If
the material behavior is nonlinear then the Newton-Raphson solution
procedure is required (<span class="italic"><em>Option</em></span> on
the <a href="../ans_cmd/Hlp_C_NROPT.html" class="olink"><span class="command"><strong>NROPT</strong></span></a> command (see <a class="xref" href="thy_tool10.html" title="14.11.&nbsp;Newton-Raphson Procedure">Newton-Raphson Procedure</a>)).   </p><p>For 2-D dynamic analyses, a current density load of either source
({J<sub>s</sub>}) or total {J<sub>t</sub>}
current density is valid.  J<sub>t</sub> input represents
the impressed current expressed in terms of a uniformly applied current
density.  This loading is only valid in a skin-effect analysis with
proper coupling of the VOLT degrees of freedom.  The electric scalar potential must be
constrained properly in order to satisfy the fundamentals of electromagnetic
field theory.  This can be achieved by direct specification of the
potential value (using the <a href="../ans_cmd/Hlp_C_D.html" class="olink"><span class="command"><strong>D</strong></span></a> command) as well as
with coupling and constraining (using the <a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> and <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a> commands). </p><p>The general transient analysis (<a href="../ans_cmd/Hlp_C_ANTYPE.html" class="olink"><span class="command"><strong>ANTYPE</strong></span></a>,TRANS accepts nonlinear material behavior 
and permanent magnets (MGXX, MGYY, MGZZ).
 Harmonic transient analyses (<a href="../ans_cmd/Hlp_C_ANTYPE.html" class="olink"><span class="command"><strong>ANTYPE</strong></span></a>,HARMIC (see <a class="xref" href="thy_anproc4.html" title="15.4.&nbsp;Harmonic Analysis">Harmonic Analysis</a>)) is a linear analyses with sinusoidal loads;
therefore, it is restricted to linear material behavior without permanent
magnets.</p></div></div><div class="sect2" title="5.2.3.&nbsp;Edge-Based Magnetic Vector Potential"><div class="titlepage"><div><div><h3 class="title"><a name="thyedgebasedmadnectpot"></a>5.2.3.&nbsp;Edge-Based Magnetic Vector Potential</h3></div></div></div><p>The following section describes the derivation of the electromagnetic
finite element     equations used by <a href="../ans_elem/Hlp_E_SOLID236.html" class="olink"><span class="structname">SOLID236</span></a> and <a href="../ans_elem/Hlp_E_SOLID237.html" class="olink"><span class="structname">SOLID237</span></a>     elements.</p><p>In an edge-based electromagnetic analysis, the magnetic vector
potential {A} is     approximated using the edge-based shape functions:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq928c852c-a4eb-4df7-af88-67f972f23a1d"></a><div><img src="graphics/eq928c852c-a4eb-4df7-af88-67f972f23a1d.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;110)</b></p></td></tr></table><p>where:</p><p>[W] = matrix of element vector (edge-based) shape functions.</p><p>{A<sub>e</sub>} = edge-flux at the element mid-side
nodes (input/output as AZ). Edge-flux is defined as the line integral
= <span class="inlineequation" style="&#xA;          vertical-align:-10.000000px"><img src="graphics/eq75988433-6002-4713-a8d1-72a754d60494.svg"></span> of the magnetic vector potential along
the element edge L.</p><p>The electric scalar potential V is approximated using scalar
(node-based) element shape     functions:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq74d5c2d6-efa4-474a-8271-a5774478b35a"></a><div><img src="graphics/eq74d5c2d6-efa4-474a-8271-a5774478b35a.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;111)</b></p></td></tr></table><p>where:</p><p>{N} = vector of element scalar (node-based) shape functions,</p><p>{V<sub>e</sub>} = electric scalar potential at the
element nodes (input/output     as VOLT).</p><p>Applying the variational principle to the governing electromagnetic
equations (see <a class="xref" href="thy_emg1.html#EBMVP1" title="(5&#8211;48)">Equation&nbsp;5&#8211;48</a> - <a class="xref" href="thy_emg1.html#EBMVP3" title="(5&#8211;50)">Equation&nbsp;5&#8211;50</a>),
we obtain the system of finite element     equations:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="EBMVP5"></a><div><img src="graphics/EBMVP5.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;112)</b></p></td></tr></table><p>where:</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eqda2970fb-6ee7-4352-9376-fa5cf1fdfdee.svg"></span>= element magnetic reluctivity matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eqb2fc555c-94a4-4976-92f4-66915d4133d4.svg"></span>= element linear magnetic reluctivity matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-23.000000px"><img src="graphics/eq546fd19e-2337-438b-8806-d3b419e69c27.svg"></span>= element nonlinear magnetic reluctivity matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq40e2bc8e-09bd-429d-b366-0d89ea7b338f.svg"></span>= element electric conductivity matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eqb0f7b656-aff7-45e4-a285-9dcb98649015.svg"></span>= element magneto-electric coupling
matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-20.000000px"><img src="graphics/eq7fcbe383-53b3-40b4-952c-a4ac6387d16c.svg"></span>= element electromagnetic coupling matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq1efce61b-f2ea-426a-a2c5-5b1ede761e8b.svg"></span>= element eddy current damping matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eqd2f979a6-e150-44b4-8c37-4b008953af52.svg"></span>= element displacement current damping matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eqea5396f5-a867-42e3-a718-9f9e5b392aa1.svg"></span>= element magneto-dielectric coupling matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq55c081f1-7740-4085-96b3-8c0894102844.svg"></span>= element displacement current mass matrix,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq7842e363-8f2e-4d35-95fe-940f73441e04.svg"></span>= element source current density vector,</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq63ae7b48-0bad-4728-a8cd-889cf0ce51dc.svg"></span>= element remnant magnetization load vector,</p><p>vol = element volume,</p><p>[&#957;] = reluctivity matrix (inverse of the magnetic permeability
matrix input as MURX,     MURY, MURZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command
or derived from the B-H curve input on      <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a> command),</p><p>
<span class="inlineequation" style="&#xA;          vertical-align:-16.000000px"><img src="graphics/eq83015afd-f914-40c1-a4a9-0ff7d71d2051.svg"></span>= derivative of reluctivity with respect to the magnitude
of magnetic flux     squared (derived from the B-H curve (input via <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a>,BH command))</p><p>[&#963;] = electrical conductivity matrix (inverse of the electrical
resistivity matrix     input as RSVX, RSVY, RSVZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command),</p><p> [&#949;]= dielectric permittivity (input as PERX, PERY,
PERZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a>     command) (applicable to a harmonic
electromagnetic analysis (KEYOPT(1) = 1) only),</p><p>{v} = velocity vector (input as VELO on <a href="../ans_cmd/Hlp_C_BF.html" class="olink"><span class="command"><strong>BF</strong></span></a> command) (applicable to     electromagnetic analysis option (KEYOPT(1)
= 1) only),</p><p>{J<sub>s</sub>} = source current density vector
(input as JS on      <a href="../ans_cmd/Hlp_C_BFE.html" class="olink"><span class="command"><strong>BFE</strong></span></a> command) (applicable to
the stranded conductor analysis option     (KEYOPT(1) = 0) only),</p><p>{H<sub>c</sub>} = coercive force vector (input as
MGXX, MGYY, MGZZ on      <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command),</p><p>{I<sub>e</sub>} = nodal current vector (input/output
as AMPS).</p><p>
<a class="xref" href="thy_emg2.html#EBMVP5" title="(5&#8211;112)">Equation&nbsp;5&#8211;112</a> describes the strong coupling between the magnetic edge-flux and the
    electric potential degrees of freedom is nonsymmetric. It can be made symmetric by either using
    the weak coupling option (KEYOPT(2) = 1) in static or transient analyses or using the
    time-integrated electric potential (KEYOPT(2) = 2) in transient or harmonic analyses. In the
    latter case, the VOLT degree of freedom has the meaning of the time-integrated electric scalar
    potential <span class="inlineequation" style="&#xA;          vertical-align:-7.000000px"><img src="graphics/eqf87199e9-b284-49d4-ac65-53ad8b7d2c23.svg"></span> , and <a class="xref" href="thy_emg2.html#EBMVP5" title="(5&#8211;112)">Equation&nbsp;5&#8211;112</a> becomes:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eqb724a489-d2fa-4b7f-a6a7-a60a1311f13e"></a><div><img src="graphics/eqb724a489-d2fa-4b7f-a6a7-a60a1311f13e.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;113)</b></p></td></tr></table><p>
</p></div><div class="sect2" title="5.2.4.&nbsp;Electric Scalar Potential"><div class="titlepage"><div><div><h3 class="title"><a name="demesp21904"></a>5.2.4.&nbsp;Electric Scalar Potential</h3></div></div></div><p>The electric scalar potential V is approximated over the element
as follows:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eqf8230da1-9e6a-4a86-b662-35e896d7323a"></a><div><img src="graphics/eqf8230da1-9e6a-4a86-b662-35e896d7323a.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;114)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>{N} = element shape functions</td></tr><tr><td>{V<sub>e</sub>} = nodal electric scalar potential
(input/output as VOLT)</td></tr></table><p>
</p><div class="sect3" title="5.2.4.1.&nbsp;Quasistatic Electric Analysis"><div class="titlepage"><div><div><h4 class="title"><a name="elecquasi"></a>5.2.4.1.&nbsp;Quasistatic Electric Analysis</h4></div></div></div><p>The application of the variational principle and finite element
discretization to the differential <a class="xref" href="thy_emg1.html#electricscalpoteq12" title="(5&#8211;80)">Equation&nbsp;5&#8211;80</a> produces the matrix equation of the form:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="quasielanaleq1"></a><div><img src="graphics/quasielanaleq1.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;115)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq579992dc-c77d-4000-8124-b4e5b3f41cb4.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-12.000000px"><img src="graphics/eq43781b48-f3dc-4128-ab64-3ddab1e6a280.svg"></span>
</td></tr><tr><td>vol = element volume</td></tr><tr><td>[&#963;<sup>eff</sup>] = <span class="quote">"<span class="quote">effective</span>"</span> conductivity matrix (defined by <a class="xref" href="thy_emg1.html#electricscalpoteq14" title="(5&#8211;83)">Equation&nbsp;5&#8211;83</a>)</td></tr><tr><td>{I<sub>e</sub>} = nodal current vector (input/output
as AMPS)</td></tr></table><p>
</p><p>
<a class="xref" href="thy_emg2.html#quasielanaleq1" title="(5&#8211;115)">Equation&nbsp;5&#8211;115</a> is used in the finite element
formulation of <a href="../ans_elem/Hlp_E_PLANE230.html" class="olink"><span class="structname">PLANE230</span></a>, <a href="../ans_elem/Hlp_E_SOLID231.html" class="olink"><span class="structname">SOLID231</span></a>, and <a href="../ans_elem/Hlp_E_SOLID232.html" class="olink"><span class="structname">SOLID232</span></a>. These elements model both
static (steady-state electric conduction) and dynamic (time-transient
and time-harmonic) electric fields. In the former case, matrix [C<sup>v</sup>] is ignored.</p><p>A time-harmonic electric analysis can also be performed using
elements <a href="../ans_elem/Hlp_E_PLANE121.html" class="olink"><span class="structname">PLANE121</span></a>, <a href="../ans_elem/Hlp_E_SOLID122.html" class="olink"><span class="structname">SOLID122</span></a>, and <a href="../ans_elem/Hlp_E_SOLID123.html" class="olink"><span class="structname">SOLID123</span></a>. In this case, the variational
principle and finite element discretization are applied to the differential <a class="xref" href="thy_emg1.html#electricscalpoteq13" title="(5&#8211;82)">Equation&nbsp;5&#8211;82</a> to produce:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="quasielanaleq2"></a><div><img src="graphics/quasielanaleq2.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;116)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq30b49e0d-242d-4f13-b197-5f466f4075d3.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-6.000000px"><img src="graphics/eq77df4022-9853-4c8c-b523-a7a2c2ca6625.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eqa768f1ec-76a4-42c9-bcbe-a9b8a5847a4b.svg"></span>
</td></tr></table><p>
</p></div><div class="sect3" title="5.2.4.2.&nbsp;Electrostatic Analysis"><div class="titlepage"><div><div><h4 class="title"><a name="d0e18734"></a>5.2.4.2.&nbsp;Electrostatic Analysis</h4></div></div></div><p>The matrix equation for an electrostatic analysis using elements <a href="../ans_elem/Hlp_E_PLANE121.html" class="olink"><span class="structname">PLANE121</span></a>, <a href="../ans_elem/Hlp_E_SOLID122.html" class="olink"><span class="structname">SOLID122</span></a>, and <a href="../ans_elem/Hlp_E_SOLID123.html" class="olink"><span class="structname">SOLID123</span></a> is derived from <a class="xref" href="thy_emg1.html#electricscalpoteq15" title="(5&#8211;84)">Equation&nbsp;5&#8211;84</a>:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="electrostatanal"></a><div><img src="graphics/electrostatanal.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;117)</b></p></td></tr></table><p>
</p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-20.000000px"><img src="graphics/eq4b915197-6066-41d3-b103-4cad08f4bcba.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq0b9ed89d-1dc6-48a5-8338-eb20e2b0999b.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-20.000000px"><img src="graphics/eq1fe0ffb9-47b4-447f-9f9d-fb86916640b3.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-17.000000px"><img src="graphics/eq81e63b85-b26a-457e-84fb-59e37cbedee7.svg"></span>
</td></tr><tr><td>{&#961;} = charge density vector (input as CHRGD on <a href="../ans_cmd/Hlp_C_BF.html" class="olink"><span class="command"><strong>BF</strong></span></a> command)</td></tr><tr><td>{&#961;<sub>s</sub>} = surface charge density 
vector (input as CHRGS on <a href="../ans_cmd/Hlp_C_SF.html" class="olink"><span class="command"><strong>SF</strong></span></a> command)</td></tr></table><p>
</p></div></div></div><hr><p class="legalfooter"><small><i>Release 18.2 - &copy; ANSYS, Inc. All rights reserved.</i></small></p></body></html>