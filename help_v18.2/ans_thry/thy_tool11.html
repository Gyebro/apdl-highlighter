<!DOCTYPE html><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta name="date" content="2017-07-14 18:41:04-04:00"><title>14.12.&nbsp;Constraint Equations</title><link rel="stylesheet" type="text/css" href="basic.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="ans_thry.html" title="Mechanical APDL Theory Reference"><link rel="up" href="thy_tool.html" title="Chapter&nbsp;14:&nbsp;Analysis Tools"><link rel="prev" href="thy_tool10.html" title="14.11.&nbsp;Newton-Raphson Procedure"><link rel="next" href="thy_tool13.html" title="14.13.&nbsp;Eigenvalue and Eigenvector Extraction"><script type="text/javascript"><!--
function toggleElementDisplay (id) {
  var elem = document.getElementById(id);
  if (elem.style.display != "block") {
    elem.style.display = "block";
  } else {
    elem.style.display = "none";
  }
}
//--></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" title="14.12.&nbsp;Constraint Equations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="kDjcf18emlg"></a>14.12.&nbsp;Constraint Equations</h2></div></div></div><a class="indexterm" name="d0e71341"></a><a class="indexterm" name="d0e71344"></a><div class="sect2" title="14.12.1.&nbsp;Derivation of Matrix and Load Vector Operations"><div class="titlepage"><div><div><h3 class="title"><a name="eltderivaopt"></a>14.12.1.&nbsp;Derivation of Matrix and Load Vector Operations</h3></div></div></div><a class="indexterm" name="d0e71352"></a><p>Given the set of L linear simultaneous equations in unknowns
u<sub>j</sub> subject to the linear constraint equation
(input on <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a> command)</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq1loadnov2101"></a><div><img src="graphics/thyeq1loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;182)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>K<sub>kj</sub> = stiffness term relating the force
at degrees of freedom k to the displacement at degrees of freedom
j </td></tr><tr><td>u<sub>j</sub> = nodal displacement of degrees
of freedom j </td></tr><tr><td>F<sub>k</sub> = nodal force of degrees of freedom
k </td></tr><tr><td>k = equation (row) number</td></tr><tr><td>j = column number </td></tr><tr><td>L = number of equations </td></tr></table><p>
</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq2loadnov2101"></a><div><img src="graphics/thyeq2loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;183)</b></p></td></tr></table><p>normalize <a class="xref" href="thy_tool11.html#thyeq2loadnov2101" title="(14&#8211;183)">Equation&nbsp;14&#8211;183</a> with respect to
the prime degrees of freedom u<sub>i</sub> by dividing
by C<sub>i</sub> to get: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq3loadnov2101"></a><div><img src="graphics/thyeq3loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;184)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-7.000000px"><img src="graphics/eqceaa466d-8e90-4107-af27-58a07680b21b.svg"></span> </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq95ee71e5-29cc-45ef-bdcc-aa83ca0ac607.svg"></span> </td></tr></table><p>
</p><p>which is written to a file for backsubstitution. <a class="xref" href="thy_tool11.html#thyeq3loadnov2101" title="(14&#8211;184)">Equation&nbsp;14&#8211;184</a> is expanded (recall 
<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq1f8eb8df-eacc-4ec8-b3b1-6197f87dffc4.svg"></span> = 1) as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq4loadnov2101"></a><div><img src="graphics/thyeq4loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;185)</b></p></td></tr></table><p>
<a class="xref" href="thy_tool11.html#thyeq1loadnov2101" title="(14&#8211;182)">Equation&nbsp;14&#8211;182</a> may be similarly expanded
as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq5loadnov2101"></a><div><img src="graphics/thyeq5loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;186)</b></p></td></tr></table><p>Multiply <a class="xref" href="thy_tool11.html#thyeq4loadnov2101" title="(14&#8211;185)">Equation&nbsp;14&#8211;185</a> by K<sub>ki</sub> and subtract from <a class="xref" href="thy_tool11.html#thyeq5loadnov2101" title="(14&#8211;186)">Equation&nbsp;14&#8211;186</a> to get: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq6loadnov2101"></a><div><img src="graphics/thyeq6loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;187)</b></p></td></tr></table><p>Specializing <a class="xref" href="thy_tool11.html#thyeq6loadnov2101" title="(14&#8211;187)">Equation&nbsp;14&#8211;187</a> for k = i allows
it to be written as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq7loadnov2101"></a><div><img src="graphics/thyeq7loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;188)</b></p></td></tr></table><p>This may be considered to be a revised form of the constraint
equation. Introducing a Lagrange multiplier &#955;<sub>k</sub>, <a class="xref" href="thy_tool11.html#thyeq6loadnov2101" title="(14&#8211;187)">Equation&nbsp;14&#8211;187</a> and <a class="xref" href="thy_tool11.html#thyeq7loadnov2101" title="(14&#8211;188)">Equation&nbsp;14&#8211;188</a> may be combined as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq8loadnov2101"></a><div><img src="graphics/thyeq8loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;189)</b></p></td></tr></table><p>By the standard Lagrange multiplier procedure (see Denn(<a class="xref" href="thy_biblio.html#arKhf1b1mlg" title="Optimization by Variational Methods">[8]</a>)): </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq9loadnov2101"></a><div><img src="graphics/thyeq9loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;190)</b></p></td></tr></table><p>Solving <a class="xref" href="thy_tool11.html#thyeq4loadnov2101" title="(14&#8211;185)">Equation&nbsp;14&#8211;185</a> for u<sub>i</sub>, </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq10loadnov2101"></a><div><img src="graphics/thyeq10loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;191)</b></p></td></tr></table><p>so that </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq11loadnov2101"></a><div><img src="graphics/thyeq11loadnov2101.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;192)</b></p></td></tr></table><p>Substituting <a class="xref" href="thy_tool11.html#thyeq11loadnov2101" title="(14&#8211;192)">Equation&nbsp;14&#8211;192</a> into <a class="xref" href="thy_tool11.html#thyeq8loadnov2101" title="(14&#8211;189)">Equation&nbsp;14&#8211;189</a> and rearranging terms, </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thy_antsl_eq1343"></a><div><img src="graphics/thy_antsl_eq1343.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;193)</b></p></td></tr></table><p>or </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="dis012303"></a><div><img src="graphics/dis012303.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;194)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-7.000000px"><img src="graphics/eqdb658d83-6c34-4ad5-bdeb-84a3e12979cb.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-6.000000px"><img src="graphics/eq99ebf9c6-ca41-473b-a518-bf460abee351.svg"></span>
</td></tr></table><p> </p></div><div class="sect2" title="14.12.2.&nbsp;Constraints: Automatic Selection of Slave DOFs"><div class="titlepage"><div><div><h3 class="title"><a name="thyantcnstrauto"></a>14.12.2.&nbsp;Constraints: Automatic Selection of Slave DOFs </h3></div></div></div><p>The constraint equation described by <a class="xref" href="thy_tool11.html#thyeq2loadnov2101" title="(14&#8211;183)">Equation&nbsp;14&#8211;183</a> can also be written in the following
matrix form:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thy_antl_eq_cnt1"></a><div><img src="graphics/thy_antl_eq_cnt1.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;195)</b></p></td></tr></table><p>where [C] can be further composed into the slave and master
DOFs so that the direct elimination method can be used. (In the direct
elimination method, <a class="xref" href="thy_tool11.html#thy_antsl_eq1343" title="(14&#8211;193)">Equation&nbsp;14&#8211;193</a> is used to
solve equation systems <a class="xref" href="thy_tool11.html#thyeq1loadnov2101" title="(14&#8211;182)">Equation&nbsp;14&#8211;182</a> and <a class="xref" href="thy_tool11.html#thyeq2loadnov2101" title="(14&#8211;183)">Equation&nbsp;14&#8211;183</a> together.)</p><p>
<a class="xref" href="thy_tool11.html#thy_antl_eq_cnt1" title="(14&#8211;195)">Equation&nbsp;14&#8211;195</a> can be re-written as:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thy_antl_eq_cnt2"></a><div><img src="graphics/thy_antl_eq_cnt2.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;196)</b></p></td></tr></table><p>where {U<sub>s</sub>} is a displacement of the slave
DOFs, and {U<sub>m</sub>} is the master DOF. </p><p>If external <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a> or <a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> commands
are issued, the user must choose which DOFs are slave and which are
master (see the <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a>/<a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> command
descriptions). In many applications, the ANSYS program automatically
uses the <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a> command and invokes the method of automatic
selection.</p><p>When solving the equation with the direct elimination method,
the {U<sub>s</sub>} variables can be removed from the
system by applying the following transformation:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thy_antl_eq_cnt3"></a><div><img src="graphics/thy_antl_eq_cnt3.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(14&#8211;197)</b></p></td></tr></table><p>Because the choice of {U<sub>s</sub>} is not unique,
the program selects {U<sub>s</sub>} slave DOFs that ensure
that <a class="xref" href="thy_tool11.html#thyeq2loadnov2101" title="(14&#8211;183)">Equation&nbsp;14&#8211;183</a> has the best possible matrix
conditioning (to avoid an ill-conditioned matrix) and fewer fill-ins
when the sparse direct solver is used. </p><p>If a value for {U<sub>s</sub>} cannot be selected
that makes <a class="xref" href="thy_tool11.html#thyeq1loadnov2101" title="(14&#8211;182)">Equation&nbsp;14&#8211;182</a> and <a class="xref" href="thy_tool11.html#thyeq2loadnov2101" title="(14&#8211;183)">Equation&nbsp;14&#8211;183</a> solvable together, the equation system
is overconstrained. Typically, overconstraint is caused by contradictory
constraint equations or an insufficient number of slave DOFs.</p><p>The ANSYS program has two automatic methods (which can be
selected via the <a href="../ans_cmd/Hlp_C_OVCHECK.html" class="olink"><span class="command"><strong>OVCHECK</strong></span></a> command) to compute the
slave DOFs and detect overconstrained DOFs:</p><div><div class="variablelist"><dl><dt><span><b class="term">The Topological Method (<a href="../ans_cmd/Hlp_C_OVCHECK.html" class="olink"><span class="command"><strong>OVCHECK</strong></span></a>,TOPO)</b></span></dt><dd><p>This method is used by default. This simple method
requires little computational time to check for overconstraints and
determine unique slave DOFs. This method starts by traversing the
topology (sparsity) pattern of the [C] matrix (<a class="xref" href="thy_tool11.html#thy_antl_eq_cnt1" title="(14&#8211;195)">Equation&nbsp;14&#8211;195</a>) row-by-row. During this process, the
first possible DOFs visited are considered slave DOFs. If the slave
DOF has been used (or appeared) before, then it selects the next possible
DOF visited as a slave DOF. Although this method traverses the entire
matrix, it is computationally inexpensive because no numerical computations
are involved. </p><p>This method does not guarantee that overconstraint
or unique slave DOFs can be determined for the entire equation system.
If this method fails to detect slave DOFs, warning or error messages
display in the program output files. </p><p>This method only traverses the constraint equation system and
does not visit matrix coefficients associated with the P variable
(i.e., Lagrangian multipliers). As a result, the topological method
cannot detect overconstraints associated with u-P formulation elements.</p></dd><dt><span><b class="term">The Algebraic Method (<a href="../ans_cmd/Hlp_C_OVCHECK.html" class="olink"><span class="command"><strong>OVCHECK</strong></span></a>,ALGEBRAIC)</b></span></dt><dd><p>This is a mathematical method that requires more computational
time than the topological method. </p><p>The slave DOFs are
chosen using factorization with full pivoting applied to the [C] matrix.
If one pivot is too small (for example, lower than 1.e-08 proportionally),
the associated constraint equation is considered redundant and removed
from the set of constraint equations that must be satisfied. </p><p>If redundant constraint equations are detected, the program
prints information regarding their removal. </p></dd></dl></div></div><p>In cases where a model uses the <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a>/<a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> command and u-P formulation elements, overconstraint
could also come from the P DOFs, in addition to <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a>/<a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> overconstraint. Detection of overconstraint
in this case is similar to the process described above; however, only
the algebraic method supports this detection. The algebraic method
packs <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a>/<a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> and matrix coefficients
from the Lagrange multiplier equations into one assembled [C] matrix
(<a class="xref" href="thy_tool11.html#thy_antl_eq_cnt1" title="(14&#8211;195)">Equation&nbsp;14&#8211;195</a>), then it executes the algebraic
method process described above into the [C] matrix. </p><p>If <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a>/<a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> values are invalid
or redundant, they are removed from equation (<a class="xref" href="thy_tool11.html#thyeq1loadnov2101" title="(14&#8211;182)">Equation&nbsp;14&#8211;182</a>) automatically, and the invalid or redundant <a href="../ans_cmd/Hlp_C_CE.html" class="olink"><span class="command"><strong>CE</strong></span></a>/<a href="../ans_cmd/Hlp_C_CP.html" class="olink"><span class="command"><strong>CP</strong></span></a> will not be used in the entire
analysis process, which includes the Newton-Raphson nonlinear convergence
loop. </p><p>If some P constraint equations are invalid or redundant, the
application stops and the user is notified which elements (e.g., <a href="../ans_elem/Hlp_E_MPC184.html" class="olink"><span class="structname">MPC184</span></a>, <a href="../ans_elem/Hlp_E_CONTA174.html" class="olink"><span class="structname">CONTA174</span></a>, etc.) are
causing overconstraint (i.e., the redundant equations). </p></div></div><hr><p class="legalfooter"><small><i>Release 18.2 - &copy; ANSYS, Inc. All rights reserved.</i></small></p></body></html>