<!DOCTYPE html><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta name="date" content="2017-07-14 18:40:00-04:00"><title>5.3.&nbsp;Electromagnetic Field Evaluations</title><link rel="stylesheet" type="text/css" href="basic.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="ans_thry.html" title="Mechanical APDL Theory Reference"><link rel="up" href="thy_emg.html" title="Chapter&nbsp;5:&nbsp;Electromagnetics"><link rel="prev" href="thy_emg2.html" title="5.2.&nbsp;Derivation of Electromagnetic Matrices"><link rel="next" href="thy_emg4.html" title="5.4.&nbsp;Stranded Coil Analyses"><script type="text/javascript"><!--
function toggleElementDisplay (id) {
  var elem = document.getElementById(id);
  if (elem.style.display != "block") {
    elem.style.display = "block";
  } else {
    elem.style.display = "none";
  }
}
//--></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" title="5.3.&nbsp;Electromagnetic Field Evaluations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="alK8f38elmm"></a>5.3.&nbsp;Electromagnetic Field Evaluations</h2></div></div></div><p>The basic magnetic analysis results include magnetic field intensity,
magnetic flux density, magnetic forces and current densities. These
types of evaluations are somewhat different for magnetic scalar and
vector formulations. The basic electric analysis results include electric
field intensity, electric current densities, electric flux density,
Joule heat and stored electric energy.</p><div class="sect2" title="5.3.1.&nbsp;Magnetic Scalar Potential Results"><div class="titlepage"><div><div><h3 class="title"><a name="elecmagresults"></a>5.3.1.&nbsp;Magnetic Scalar Potential Results</h3></div></div></div><a class="indexterm" name="d0e18804"></a><a class="indexterm" name="d0e18807"></a><a class="indexterm" name="d0e18810"></a><a class="indexterm" name="d0e18815"></a><p>The first derived result is the magnetic field intensity which
is divided into two parts (see <a class="xref" href="thy_emg1.html" title="5.1.&nbsp;Electromagnetic Field Fundamentals">Electromagnetic Field Fundamentals</a>); a generalized
field {H<sub>g</sub>} and the gradient of the generalized
potential -
<span class="inlineequation" style="&#xA;          vertical-align:-1.000000px"><img src="graphics/eqd9726785-9e97-47ea-8d1e-d79ce56980ea.svg"></span>&#981;g.  This gradient
(referred to here as {H<sub>&#981;</sub>) is evaluated
at the integration points using the element shape function as: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq1electrofieldnov2801"></a><div><img src="graphics/thyeq1electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;118)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-9.000000px"><img src="graphics/eqa3f80990-4f79-430a-99ce-6ea428ec3f5a.svg"></span> </td></tr><tr><td>{N} = shape functions </td></tr><tr><td>{&#969;<sub>g</sub>} = nodal generalized potential
vector </td></tr></table><p>
</p><p>The magnetic field intensity is then: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq2electrofieldnov2801"></a><div><img src="graphics/thyeq2electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;119)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{H} = magnetic field intensity (output as H) </td></tr></table><p>
</p><p> Then the magnetic flux density is computed from the field intensity: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq3electrofieldnov2801"></a><div><img src="graphics/thyeq3electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;120)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{B} = magnetic flux density (output as B) </td></tr><tr><td>[&#956;] = permeability matrix (defined in <a class="xref" href="thy_emg1.html#thyeq7electronov2801" title="(5&#8211;7)">Equation&nbsp;5&#8211;7</a>, <a class="xref" href="thy_emg1.html#thyeq8electronov2801" title="(5&#8211;8)">Equation&nbsp;5&#8211;8</a>, and <a class="xref" href="thy_emg1.html#thyeq9electronov2801" title="(5&#8211;9)">Equation&nbsp;5&#8211;9</a>) </td></tr></table><p>
</p><p>Nodal values of field intensity and flux density are computed
from the integration points values as described in <a class="xref" href="thy_et6.html" title="12.9.&nbsp;Nodal and Centroidal Data Evaluation">Nodal and Centroidal Data Evaluation</a>. </p><p>Magnetic forces are also available and are discussed below. </p></div><div class="sect2" title="5.3.2.&nbsp;Magnetic Vector Potential Results"><div class="titlepage"><div><div><h3 class="title"><a name="elecmagvecresults"></a>5.3.2.&nbsp;Magnetic Vector Potential Results</h3></div></div></div><p>The magnetic flux density is the first derived result.  It is
defined as the curl of the magnetic vector potential.  This evaluation
is performed at the integration points using the element shape functions: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq4electrofieldnov2801"></a><div><img src="graphics/thyeq4electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;121)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{B} = magnetic flux density (output as B) </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-1.000000px"><img src="graphics/eq69e7b6eb-59b4-4189-a5ed-8dbda4f96c97.svg"></span>x = curl operator </td></tr><tr><td>[N<sub>A</sub>] = shape functions </td></tr><tr><td>{A<sub>e</sub>} = nodal magnetic vector potential </td></tr></table><p>
</p><p>Then the magnetic field intensity is computed from the flux
density: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq5electrofieldnov2801"></a><div><img src="graphics/thyeq5electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;122)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{H} = magnetic field intensity (output as H) </td></tr><tr><td>[&#957;] = reluctivity matrix </td></tr></table><p>
</p><p>Nodal values of field intensity and flux density are computed
from the integration point value as described in <a class="xref" href="thy_et6.html" title="12.9.&nbsp;Nodal and Centroidal Data Evaluation">Nodal and Centroidal Data Evaluation</a>. </p><p>Magnetic forces are also available and are discussed below. </p><p>For a vector potential transient analysis current densities
are also calculated. </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq6electrofieldnov2801"></a><div><img src="graphics/thyeq6electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;123)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{J<sub>t</sub>} = total current density </td></tr></table><p>
</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq7electrofieldnov2801"></a><div><img src="graphics/thyeq7electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;124)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{J<sub>e</sub>} = current density component due
to {A}  </td></tr><tr><td>[&#963;] = conductivity matrix </td></tr><tr><td>n = number of integration points </td></tr><tr><td>[N<sub>A</sub>] = element shape functions for
{A} evaluated at the integration points </td></tr><tr><td>{A<sub>e</sub>} = time derivative of magnetic
vector potential </td></tr></table><p>
</p><p>and </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq8electrofieldnov2801"></a><div><img src="graphics/thyeq8electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;125)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{J<sub>s</sub>} = current density component due
to V </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-1.000000px"><img src="graphics/eq365216f7-cf8f-4217-a321-cfe0a63411f9.svg"></span> = divergence operator </td></tr><tr><td>{V<sub>e</sub>} = electric scalar potential </td></tr><tr><td>{N} = element shape functions for V evaluated at the integration
points </td></tr></table><p>
</p><p>and </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq9electrofieldnov2801"></a><div><img src="graphics/thyeq9electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;126)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{J<sub>v</sub>} = velocity current density vector </td></tr><tr><td>{v} = applied velocity vector </td></tr><tr><td>{B} = magnetic flux density (see <a class="xref" href="thy_emg3.html#thyeq4electrofieldnov2801" title="(5&#8211;121)">Equation&nbsp;5&#8211;121</a>) </td></tr></table><p>
</p></div><div class="sect2" title="5.3.3.&nbsp;Edge-Based Magnetic Vector Potential"><div class="titlepage"><div><div><h3 class="title"><a name="d0e19022"></a>5.3.3.&nbsp;Edge-Based Magnetic Vector Potential</h3></div></div></div><p>The following section describes the results derived from an
edge-based electromagnetic analysis using <a href="../ans_elem/Hlp_E_SOLID236.html" class="olink"><span class="structname">SOLID236</span></a> and <a href="../ans_elem/Hlp_E_SOLID237.html" class="olink"><span class="structname">SOLID237</span></a> elements.</p><p>The electromagnetic fields and fluxes are evaluated at the integration
points as follows:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eqba06cced-c6f8-42fa-af87-e793dd921c70"></a><div><img src="graphics/eqba06cced-c6f8-42fa-af87-e793dd921c70.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;127)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq078cc43a-b827-4997-8477-b734df051b42"></a><div><img src="graphics/eq078cc43a-b827-4997-8477-b734df051b42.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;128)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq58f6de8f-d0cf-4444-8300-50ffdd2e3886"></a><div><img src="graphics/eq58f6de8f-d0cf-4444-8300-50ffdd2e3886.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;129)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq5a666acb-e2cb-48ff-b88b-99ea67c65bb0"></a><div><img src="graphics/eq5a666acb-e2cb-48ff-b88b-99ea67c65bb0.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;130)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq3259f06c-ba39-43fe-9eee-edea88e42be2"></a><div><img src="graphics/eq3259f06c-ba39-43fe-9eee-edea88e42be2.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;131)</b></p></td></tr></table><p>where:</p><p>{B} = magnetic flux density (output as B at the element nodes),
 </p><p>{H} = magnetic field intensity (output as H at the element nodes),</p><p>{E} = electric field intensity (output as EF at the element
nodes),</p><p>{J<sub>c</sub>} = conduction current density (output
as JC at the element nodes and as JT at the element centroid),</p><p>{J<sub>s</sub>} = total (conduction + displacement)
current density (output as JS at the element centroid; same as JT
in a static or transient analysis),</p><p>{A<sub>e</sub>}= edge-flux at the element mid-side
nodes (input/output as AZ), </p><p>{V<sub>e</sub>} = electric scalar potential at the
element nodes (input/output as VOLT), </p><p>[W] = matrix of element vector (edge-based) shape functions,</p><p>{N} = vector of element scalar (node-based) shape functions,</p><p>[&#957;] = reluctivity matrix (inverse of the magnetic permeability
matrix (input as MURX, MURY, MURZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command
or derived from the B-H curve input on <a href="../ans_cmd/Hlp_C_TB.html" class="olink"><span class="command"><strong>TB</strong></span></a> command),
  </p><p>[&#963;] = electrical conductivity matrix (inverse of the electrical
resistivity matrix   input as RSVX, RSVY, RSVZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command),   </p><p>[&#949;] = dielectric permittivity (input as PERX, PERY,
PERZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command) (applicable to a harmonic electromagnetic
analysis (KEYOPT(1) = 1) only). </p><p>{&#957;} = velocity vector (input as VELO on <a href="../ans_cmd/Hlp_C_BF.html" class="olink"><span class="command"><strong>BF</strong></span></a> command) (applicable to electromagnetic analyses (KEYOPT(1) = 1)
only)</p><p>Nodal values of the above quantities are computed from the integration
point values as described in <a class="xref" href="thy_et6.html" title="12.9.&nbsp;Nodal and Centroidal Data Evaluation">Nodal and Centroidal Data Evaluation</a>.</p></div><div class="sect2" title="5.3.4.&nbsp;Magnetic Forces"><div class="titlepage"><div><div><h3 class="title"><a name="elecmagforces"></a>5.3.4.&nbsp;Magnetic Forces</h3></div></div></div><p>Magnetic forces are computed by elements using the vector potential
method (<a href="../ans_elem/Hlp_E_PLANE13.html" class="olink"><span class="structname">PLANE13</span></a>, <a href="../ans_elem/Hlp_E_PLANE233.html" class="olink"><span class="structname">PLANE233</span></a>, <a href="../ans_elem/Hlp_E_SOLID236.html" class="olink"><span class="structname">SOLID236</span></a> and <a href="../ans_elem/Hlp_E_SOLID237.html" class="olink"><span class="structname">SOLID237</span></a>) and the scalar potential method (<a href="../ans_elem/Hlp_E_SOLID5.html" class="olink"><span class="structname">SOLID5</span></a>, <a href="../ans_elem/Hlp_E_SOLID96.html" class="olink"><span class="structname">SOLID96</span></a>, and <a href="../ans_elem/Hlp_E_SOLID98.html" class="olink"><span class="structname">SOLID98</span></a>).  Three different techniques are used to calculate magnetic forces
at the element level.</p><div class="sect3" title="5.3.4.1.&nbsp;Lorentz forces"><div class="titlepage"><div><div><h4 class="title"><a name="d0e19149"></a>5.3.4.1.&nbsp;Lorentz forces</h4></div></div></div><p>Magnetic forces in current carrying conductors (element output
quantity FJB) are numerically integrated using: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq10electrofieldnov2801"></a><div><img src="graphics/thyeq10electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;132)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{N} = vector of shape functions </td></tr></table><p>
</p><p>For a 2-D analysis, the corresponding electromagnetic torque
about +Z is given by: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq11electrofieldnov2801"></a><div><img src="graphics/thyeq11electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;133)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{Z} = unit vector along +Z axis </td></tr><tr><td>{r} = position vector in the global Cartesian coordinate system </td></tr></table><p>
</p><p>In a time-harmonic analysis, the time-averaged Lorentz force
and torque are computed by: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq12electrofieldnov2801"></a><div><img src="graphics/thyeq12electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;134)</b></p></td></tr></table><p>and </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq13electrofieldnov2801"></a><div><img src="graphics/thyeq13electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;135)</b></p></td></tr></table><p>respectively. </p><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{J}* = complex conjugate of {J}</td></tr></table><p> </p></div><div class="sect3" title="5.3.4.2.&nbsp;Maxwell Forces"><div class="titlepage"><div><div><h4 class="title"><a name="electromaxwell"></a>5.3.4.2.&nbsp;Maxwell Forces</h4></div></div></div><p>The Maxwell stress tensor is used to determine forces on ferromagnetic
regions. Depending on whether the magnetic forces are derived from
the Maxwell stress tensor using surface or volumetric integration,
one distinguishes between the surface and the volumetric integral
methods.</p><div class="sect4" title="5.3.4.2.1.&nbsp;Surface Integral Method"><div class="titlepage"><div><div><h5 class="title"><a name="d0e19199"></a>5.3.4.2.1.&nbsp;Surface Integral Method</h5></div></div></div><p>This method is used by <a href="../ans_elem/Hlp_E_PLANE13.html" class="olink"><span class="structname">PLANE13</span></a>, <a href="../ans_elem/Hlp_E_SOLID5.html" class="olink"><span class="structname">SOLID5</span></a>, <a href="../ans_elem/Hlp_E_SOLID96.html" class="olink"><span class="structname">SOLID96</span></a>, and <a href="../ans_elem/Hlp_E_SOLID98.html" class="olink"><span class="structname">SOLID98</span></a> elements.</p><p>The force calculation is performed on surfaces of air material
elements which have a nonzero face loading specified (MXWF on <a href="../ans_cmd/Hlp_C_SF.html" class="olink"><span class="command"><strong>SF</strong></span></a> commands) (Moon(<a class="xref" href="thy_biblio.html#apupf269mlg" title="Magneto-Solid Mechanics">[77]</a>)).  For
the 2-D application, this method uses extrapolated field values and
results in the following numerically integrated surface integral: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq14electrofieldnov2801"></a><div><img src="graphics/thyeq14electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;136)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{F<sup>mx</sup>} = Maxwell force (output as
FMX)</td></tr><tr><td>&#956;<sub>o</sub> = permeability of free space
(input on         <a href="../ans_cmd/Hlp_C_EMUNIT.html" class="olink"><span class="command"><strong>EMUNIT</strong></span></a> command) </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq71d8648a-205d-446f-a887-4f571693d58d.svg"></span>       </td></tr><tr><td>T<sub>12</sub> = B<sub>x</sub>   
    B<sub>y</sub>
</td></tr><tr><td>T<sub>21</sub> = B<sub>x</sub> B<sub>y</sub>       </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eqb08f2eb5-289b-42dd-be91-be6e14da62cb.svg"></span>       </td></tr></table><p>3-D applications are an extension of the 2-D case. </p><p>For a 2-D analysis, the corresponding electromagnetic torque
about +Z axis is given by:  </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq15electrofieldnov2801"></a><div><img src="graphics/thyeq15electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;137)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:0.000000px"><img src="graphics/eq71045223-0e64-47f0-bf3f-48ff48271f2e.svg"></span> = unit surface normal in the global Cartesian coordinate
system </td></tr></table><p>
</p><p>In a time-harmonic analysis, the time-averaged Maxwell stress
tensor force and torque are computed by:  </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq16electrofieldnov2801"></a><div><img src="graphics/thyeq16electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;138)</b></p></td></tr></table><p>and </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq17electrofieldnov2801"></a><div><img src="graphics/thyeq17electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;139)</b></p></td></tr></table><p>respectively.  </p><p>where:  </p><table border="0" summary="Simple list" class="simplelist"><tr><td>{B}* = complex conjugate of {B}</td></tr><tr><td>Re{ } = denotes real part of a complex quantity </td></tr></table><p>
</p></div><div class="sect4" title="5.3.4.2.2.&nbsp;Volumetric Integral Method"><div class="titlepage"><div><div><h5 class="title"><a name="d0e19316"></a>5.3.4.2.2.&nbsp;Volumetric Integral Method </h5></div></div></div><p>This method is used by <a href="../ans_elem/Hlp_E_PLANE233.html" class="olink"><span class="structname">PLANE233</span></a>, <a href="../ans_elem/Hlp_E_SOLID236.html" class="olink"><span class="structname">SOLID236</span></a>, and <a href="../ans_elem/Hlp_E_SOLID237.html" class="olink"><span class="structname">SOLID237</span></a> elements
with KEYOPT(8) = 0.</p><p>The Maxwell forces are calculated by the following volumetric
integral:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thymaxforvolint"></a><div><img src="graphics/thymaxforvolint.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;140)</b></p></td></tr></table><p>where:</p><p>

<span class="inlineequation" style="&#xA;          vertical-align:-8.000000px"><img src="graphics/eq154ddf05-184f-444e-a8fb-14deda3c62d7.svg"></span>  = element magnetic Maxwell forces
(output as FMAG at all the element nodes with KEYOPT(7) = 0 or at
the element corner nodes only with KEYOPT(7) = 1),   </p><p>[B] = strain-displacement matrix  </p><p>{T<sup>mx</sup>} = Maxwell stress vector = {T<sub>11</sub> T<sub>22</sub> T<sub>33</sub> T<sub>12</sub> T<sub>23</sub> T<sub>13</sub>}<sup>T</sup>
</p><p>The <a href="../ans_cmd/Hlp_C_EMFT.html" class="olink"><span class="command"><strong>EMFT</strong></span></a> macro can be used with this method
to sum up Maxwell forces and torques. </p></div></div><div class="sect3" title="5.3.4.3.&nbsp;Virtual Work Forces"><div class="titlepage"><div><div><h4 class="title"><a name="electrovwf"></a>5.3.4.3.&nbsp;Virtual Work Forces</h4></div></div></div><p>Electromagnetic nodal forces (including electrostatic forces)
are calculated using the virtual work principle.  The two formulations
currently used for force calculations are the element shape method
(magnetic forces) and nodal perturbations method (electromagnetic
forces).</p><div class="sect4" title="5.3.4.3.1.&nbsp;Element Shape Method"><div class="titlepage"><div><div><h5 class="title"><a name="d0e19384"></a>5.3.4.3.1.&nbsp;Element Shape Method</h5></div></div></div><p>Magnetic forces calculated using the virtual work method (element
output quantity FVW) are obtained as the derivative of the energy
versus the displacement (MVDI on <a href="../ans_cmd/Hlp_C_BF.html" class="olink"><span class="command"><strong>BF</strong></span></a> commands) of
the movable part.  This calculation is valid for a layer of air elements
surrounding a movable part (Coulomb(<a class="xref" href="thy_biblio.html#Excgf157mlg" title="&#34;Finite Element Implementation of Virtual Work Principle for Magnetic for Electric Force and Torque Calculation&#8221;">[76]</a>)).
 To determine the total force acting on the body, the forces in the
air layer surrounding it can be summed.  The basic equation for force
of an air material element in the s direction is: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq18electrofieldnov2801"></a><div><img src="graphics/thyeq18electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;141)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>F<sub>s</sub> = force in element in the s direction </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-6.000000px"><img src="graphics/eq31612351-024a-4112-976f-3c8f60c90090.svg"></span> </td></tr><tr><td>s = virtual displacement of the nodal coordinates taken alternately
to be in the X, Y, Z global directions </td></tr><tr><td>vol = volume of the element </td></tr></table><p>
</p><p>For a 2-D analysis, the corresponding electromagnetic torque
about +Z axis is given by: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq19electrofieldnov2801"></a><div><img src="graphics/thyeq19electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;142)</b></p></td></tr></table><p>In a time-harmonic analysis, the time-averaged virtual work
force and torque are computed by: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq20electrofieldnov2801"></a><div><img src="graphics/thyeq20electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;143)</b></p></td></tr></table><p>and </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq21electrofieldnov2801"></a><div><img src="graphics/thyeq21electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;144)</b></p></td></tr></table><p>respectively. </p></div><div class="sect4" title="5.3.4.3.2.&nbsp;Nodal Perturbation Method"><div class="titlepage"><div><div><h5 class="title"><a name="nodalpertmethod"></a>5.3.4.3.2.&nbsp;Nodal Perturbation Method</h5></div></div></div><p>This method is used by <a href="../ans_elem/Hlp_E_PLANE121.html" class="olink"><span class="structname">PLANE121</span></a>, <a href="../ans_elem/Hlp_E_SOLID122.html" class="olink"><span class="structname">SOLID122</span></a> and <a href="../ans_elem/Hlp_E_SOLID123.html" class="olink"><span class="structname">SOLID123</span></a> elements.</p><p>Electromagnetic (both electric and magnetic) forces are calculated
as the derivatives of the total element coenergy (sum of electrostatic
and magnetic coenergies) with respect to the element nodal coordinates
(Gyimesi et al.(<a class="xref" href="thy_biblio.html#gyimesiavdeevdale" title="&#8220;Finite Element Simulation of Micro Electro Mechanical Systems MEMS by Strongly Coupled Electro Mechanical Transducers&#8221;">[347]</a>)):</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eqf5b8e047-a093-4087-90f1-e01bbc62dcb5"></a><div><img src="graphics/eqf5b8e047-a093-4087-90f1-e01bbc62dcb5.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;145)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>F<sub>xi</sub> = x-component (y- or z-) of electromagnetic
force calculated in node i</td></tr><tr><td>x<sub>i</sub> = nodal coordinate (x-, y-, or z-coordinate
of node i)</td></tr><tr><td>vol = volume of the element</td></tr></table><p>
</p><p>Nodal electromagnetic forces are calculated for each node in
each element. In an assembled model the nodal forces are added up
from all adjacent to the node elements. The nodal perturbation method
provides consistent and accurate electric and magnetic forces (using
the <a href="../ans_cmd/Hlp_C_EMFT.html" class="olink"><span class="command"><strong>EMFT</strong></span></a> command macro).</p></div></div></div><div class="sect2" title="5.3.5.&nbsp;Joule Heat in a Magnetic Analysis"><div class="titlepage"><div><div><h3 class="title"><a name="elecjouleheat"></a>5.3.5.&nbsp;Joule Heat in a Magnetic Analysis</h3></div></div></div><a class="indexterm" name="d0e19482"></a><a class="indexterm" name="d0e19485"></a><a class="indexterm" name="d0e19488"></a><p>Joule heat is computed by elements using the vector potential
method (<a href="../ans_elem/Hlp_E_PLANE13.html" class="olink"><span class="structname">PLANE13</span></a>, <a href="../ans_elem/Hlp_E_SOLID236.html" class="olink"><span class="structname">SOLID236</span></a>, and <a href="../ans_elem/Hlp_E_SOLID237.html" class="olink"><span class="structname">SOLID237</span></a>) if the element has a nonzero
resistivity (material property RSVX) and a nonzero current density
(either applied J<sub>s</sub> or resultant J<sub>t</sub>).  It is available as the output power loss (output
as JHEAT) or as the coupled field heat generation load (<a href="../ans_cmd/Hlp_C_LDREAD.html" class="olink"><span class="command"><strong>LDREAD</strong></span></a>,HGEN). </p><p>Joule heat per element is computed as: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
<span class="bold"><strong>Static or Transient Magnetic
Analysis</strong></span> </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq22electrofieldnov2801"></a><div><img src="graphics/thyeq22electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;146)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>Q<sup>j</sup> = Joule heat per unit volume</td></tr><tr><td>n = number of integration points </td></tr><tr><td>[&#961;] = resistivity matrix (input as RSVX, RSVY, RSVZ on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command) </td></tr><tr><td>{J<sub>ti</sub>} = total current density in the
element at integration  point i </td></tr></table><p>
</p></li><li class="listitem"><p>
<span class="bold"><strong>Harmonic Magnetic Analysis</strong></span> </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq23electrofieldnov2801"></a><div><img src="graphics/thyeq23electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;147)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>Re = real component </td></tr><tr><td>{J<sub>ti</sub>} = complex total current density
in the element at integration point i </td></tr><tr><td>{J<sub>ti</sub>}* = complex conjugate of {J<sub>ti</sub>} </td></tr></table><p>
</p></li></ol></div></div><div class="sect2" title="5.3.6.&nbsp;Electric Scalar Potential Results"><div class="titlepage"><div><div><h3 class="title"><a name="elecscalpotres"></a>5.3.6.&nbsp;Electric Scalar Potential Results</h3></div></div></div><p>The first derived result in this analysis is the electric field.
By definition (<a class="xref" href="thy_emg1.html#electricscalpoteq5" title="(5&#8211;73)">Equation&nbsp;5&#8211;73</a>), it is calculated
as the negative gradient of the electric scalar potential. This evaluation
is performed at the integration points using the element shape functions:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq24electrofieldnov2801"></a><div><img src="graphics/thyeq24electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;148)</b></p></td></tr></table><p>Nodal values of electric field (output as EF) are computed from
the integration points values as described in <a class="xref" href="thy_et6.html" title="12.9.&nbsp;Nodal and Centroidal Data Evaluation">Nodal and Centroidal Data Evaluation</a>. The derivation of other output quantities
depends on the analysis types described below.</p><div class="sect3" title="5.3.6.1.&nbsp;Quasistatic Electric Analysis"><div class="titlepage"><div><div><h4 class="title"><a name="thyquaselec"></a>5.3.6.1.&nbsp;Quasistatic Electric Analysis</h4></div></div></div><p>The conduction current and electric flux densities are computed
from the electric field (see <a class="xref" href="thy_emg1.html#electricscalpoteq6" title="(5&#8211;74)">Equation&nbsp;5&#8211;74</a> and <a class="xref" href="thy_emg1.html#electricscalpoteq7" title="(5&#8211;75)">Equation&nbsp;5&#8211;75</a>):</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="electroqeaeq1"></a><div><img src="graphics/electroqeaeq1.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;149)</b></p></td></tr></table><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="electroqeaeq2"></a><div><img src="graphics/electroqeaeq2.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;150)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq7b512e78-818c-4122-b6ad-64065ab4a8bb.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq655dbd5e-e0a8-4a3e-9e47-0f450dce91f5.svg"></span>
</td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-6.000000px"><img src="graphics/eq566200c6-c591-4d78-badb-f06067c03a0f.svg"></span>
</td></tr></table><p>
</p><p>Both the conduction current {J} and electric flux {D} densities
are evaluated at the integration point locations; however, whether
these values are then moved to nodal or centroidal locations depends
on the element type used to do a quasistatic electric analysis:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In a current-based electric analysis using elements <a href="../ans_elem/Hlp_E_PLANE230.html" class="olink"><span class="structname">PLANE230</span></a>, <a href="../ans_elem/Hlp_E_SOLID231.html" class="olink"><span class="structname">SOLID231</span></a>, and <a href="../ans_elem/Hlp_E_SOLID232.html" class="olink"><span class="structname">SOLID232</span></a>, the conduction current density is stored at
both the nodal (output as JC) and centoidal (output as JT) locations.
The electric flux density vector components are stored at the element
centroidal location and output as nonsummable miscellaneous items;</p></li><li class="listitem"><p>In a charge-based analysis using elements <a href="../ans_elem/Hlp_E_PLANE121.html" class="olink"><span class="structname">PLANE121</span></a>, <a href="../ans_elem/Hlp_E_SOLID122.html" class="olink"><span class="structname">SOLID122</span></a>, and <a href="../ans_elem/Hlp_E_SOLID123.html" class="olink"><span class="structname">SOLID123</span></a> (harmonic analysis), the conduction current
density is stored at the element centroidal location (output as JT),
while the electric flux density is moved to the nodal locations (output
as D).</p></li></ul></div><p>The total electric current {J<sub>tot</sub>} density
is calculated as a sum of conduction {J} and displacement current 
<span class="inlineequation" style="&#xA;          vertical-align:-6.000000px"><img src="graphics/eq0f9c57ac-b2c0-4cdb-a34d-98d7e65761a2.svg"></span>  densities:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq351c01c3-2539-4adb-91cc-06c0124777cb"></a><div><img src="graphics/eq351c01c3-2539-4adb-91cc-06c0124777cb.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;151)</b></p></td></tr></table><p>The total electric current density is stored at the element
centroidal location (output as JS). It can be used as a source current
density in a subsequent magnetic analysis (<a href="../ans_cmd/Hlp_C_LDREAD.html" class="olink"><span class="command"><strong>LDREAD</strong></span></a>,JS).</p><p>The Joule heat is computed from the centroidal values of electric
field and conduction current density. In a steady-state or transient
electric analysis, the Joule heat is calculated as:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq6dc2854e-c293-4c0d-ab3b-6b5ea16e0c77"></a><div><img src="graphics/eq6dc2854e-c293-4c0d-ab3b-6b5ea16e0c77.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;152)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>Q = Joule heat generation rate per unit volume (output as
JHEAT) </td></tr></table><p>
</p><p>In a harmonic electric analysis, the Joule heat generation value
per unit volume is time-averaged over a one period and calculated
as:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq4155b28f-99b3-4332-88dc-04294b927db8"></a><div><img src="graphics/eq4155b28f-99b3-4332-88dc-04294b927db8.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;153)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>Re = real component</td></tr><tr><td>{E}* = complex conjugate of {E}</td></tr></table><p>
</p><p>The value of Joule heat can be used as heat generation load
in a subsequent thermal analysis (<a href="../ans_cmd/Hlp_C_LDREAD.html" class="olink"><span class="command"><strong>LDREAD</strong></span></a>,HGEN).</p><p>In a transient electric analysis, the element stored electric
energy is calculated as:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="storedelen"></a><div><img src="graphics/storedelen.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;154)</b></p></td></tr></table><p>where:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>W = stored electric energy (output as SENE)</td></tr></table><p>
</p><p>In a harmonic electric analysis, the time-averaged electric
energy is calculated as:</p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="eq73a54144-d88f-4f94-8264-0e2dafb29e25"></a><div><img src="graphics/eq73a54144-d88f-4f94-8264-0e2dafb29e25.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;155)</b></p></td></tr></table></div><div class="sect3" title="5.3.6.2.&nbsp;Electrostatic Analysis"><div class="titlepage"><div><div><h4 class="title"><a name="d0e19721"></a>5.3.6.2.&nbsp;Electrostatic Analysis </h4></div></div></div><p>The derived results in an electrostatic analysis are:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>Electric field (see <a class="xref" href="thy_emg3.html#thyeq24electrofieldnov2801" title="(5&#8211;148)">Equation&nbsp;5&#8211;148</a>) at nodal locations (output as EF);</td></tr><tr><td>Electric flux density (see <a class="xref" href="thy_emg3.html#electroqeaeq2" title="(5&#8211;150)">Equation&nbsp;5&#8211;150</a>)
at nodal locations (output as D); </td></tr><tr><td>Element stored electric energy (see <a class="xref" href="thy_emg3.html#storedelen" title="(5&#8211;154)">Equation&nbsp;5&#8211;154</a>) output as SENE</td></tr></table><p>Electrostatic forces are also available and are discussed below.</p></div></div><div class="sect2" title="5.3.7.&nbsp;Electrostatic Forces"><div class="titlepage"><div><div><h3 class="title"><a name="electrostaticforce"></a>5.3.7.&nbsp;Electrostatic Forces</h3></div></div></div><p>Electrostatic forces are determined using the nodal perturbation
method (recommended) described in <a class="xref" href="thy_emg3.html#nodalpertmethod" title="5.3.4.3.2.&nbsp;Nodal Perturbation Method">Nodal Perturbation Method</a> or the Maxwell stress tensor described here.  This force calculation
is performed on surfaces of elements which have a nonzero face loading
specified (MXWF on <a href="../ans_cmd/Hlp_C_SF.html" class="olink"><span class="command"><strong>SF</strong></span></a> commands).  For the 2-D application,
this method uses extrapolated field values and results in the following
numerically integrated surface integral: </p><table width="100%" class="equation"><colgroup><col width="95%" align="center"><col width="5%" align="right"></colgroup><tr><td align="center"><a name="thyeq26electrofieldnov2801"></a><div><img src="graphics/thyeq26electrofieldnov2801.svg"></div></td><td nowrap="yes" align="right" valign="middle"><p class="title"><b>(5&#8211;156)</b></p></td></tr></table><p>where: </p><table border="0" summary="Simple list" class="simplelist"><tr><td>&#949;<sub>o</sub> = free space permittivity
(input as PERX on <a href="../ans_cmd/Hlp_C_MP.html" class="olink"><span class="command"><strong>MP</strong></span></a> command) </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq1a03ef7b-9fa7-4f77-aa27-86106259fc7f.svg"></span> </td></tr><tr><td>T<sub>12</sub> = E<sub>x</sub> E<sub>y</sub>
</td></tr><tr><td>T<sub>21</sub> = E<sub>y</sub> E<sub>x</sub> </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq947137be-0c74-4368-abbc-47567b485c7e.svg"></span>
</td></tr><tr><td>n<sub>1</sub> = component of unit normal in x-direction </td></tr><tr><td>n<sub>2</sub> = component of unit normal in y-direction </td></tr><tr><td>s = surface area of the element face </td></tr><tr><td>

<span class="inlineequation" style="&#xA;          vertical-align:-5.000000px"><img src="graphics/eq0a15c347-bd15-48ea-99ed-03a6f8f405da.svg"></span>
</td></tr></table><p>
</p><p>3-D applications are an extension of the 2-D case. </p></div></div><hr><p class="legalfooter"><small><i>Release 18.2 - &copy; ANSYS, Inc. All rights reserved.</i></small></p></body></html>