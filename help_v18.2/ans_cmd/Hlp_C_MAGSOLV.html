<!DOCTYPE html><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta name="date" content="2017-07-14 18:39:40-04:00"><title>MAGSOLV</title><link rel="stylesheet" type="text/css" href="basic.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="Hlp_C_CmdTOC.html" title="Mechanical APDL Command Reference"><link rel="up" href="Hlp_M_TOC.html" title="M Commands"><link rel="prev" href="Hlp_C_MAGOPT.html" title="MAGOPT"><link rel="next" href="Hlp_C_MAIL.html" title="/MAIL"><script type="text/javascript"><!--
function toggleElementDisplay (id) {
  var elem = document.getElementById(id);
  if (elem.style.display != "block") {
    elem.style.display = "block";
  } else {
    elem.style.display = "none";
  }
}
//--></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="MAGSOLV"><a name="MAGSOLV"></a><div class="titlepage"></div><a class="indexterm" name="d0e159242"></a><span class="refentrytitle"><span class="command"><strong>MAGSOLV</strong></span></span><div class="refnamediv"><p><span class="command"><strong>MAGSOLV</strong></span>, <em class="replaceable"><code>OPT</code></em>, <em class="replaceable"><code>NRAMP</code></em>, <em class="replaceable"><code>CNVCSG</code></em>, <em class="replaceable"><code>CNVFLUX</code></em>, <em class="replaceable"><code>NEQIT</code></em>, <em class="replaceable"><code>BIOT</code></em>,<em class="replaceable"><code>CNVTOL</code></em><br><b class="refpurpose">Specifies magnetic solution options and initiates the
solution.</b><div class="refclass"><div class=""><div class="application"><span class="application"><a class="link" href="Hlp_C_CH2_6.html" title="2.6.&nbsp;SOLUTION Commands"><code class="classname">SOLUTION</code></a>: <a class="link" href="Hlp_C_CH2_6.html#cmdsoluldstepjla070199" title="Table&nbsp;2.53:&nbsp;&nbsp;Load Step Options"><span class="type">Load Step Options</span></a></span></div></div></div><div class="refclass"><div class=""><div class="application"><span class="application"><a href="Hlp_C_CH1_2_1.html#aIcomd24mcm" class="olink">Compatible Products:</a>  &#8211; | &#8211; | &#8211; | Enterprise | Ent PP | Ent Solver | &#8211;</span></div></div></div></p></div><div class="refsynopsisdiv" title="Synopsis"><a name="MAGSOLV.argdescript"></a><h2></h2><div><div class="variablelist"><dl><dt><span><b class="term"><em class="replaceable"><code>OPT</code></em></b></span></dt><dd><p>Static magnetic solution option:</p><div><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr valign="top"><td align="right" valign="top"><p><span><b class="term">0</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Vector potential (MVP) or edge formulation
 (default).</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">1</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Combined vector potential and reduced
scalar potential (MVP-RSP).</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">2</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Reduced scalar potential (RSP).</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">3</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Difference scalar potential (DSP).</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">4</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>General scalar potential (GSP).</p></td></tr></tbody></table></div></div></dd><dt><span><b class="term"><em class="replaceable"><code>NRAMP</code></em></b></span></dt><dd><p>Number of ramped substeps for the first load step
of a nonlinear MVP or MVP-RSP solution.  Defaults to 3.  If <em class="replaceable"><code>NRAMP</code></em> = -1, ignore the ramped load step entirely.<em class="replaceable"><code>NRAMP</code></em> is ignored for linear magnetostatics.</p></dd><dt><span><b class="term"><em class="replaceable"><code>CNVCSG</code></em></b></span></dt><dd><p>Tolerance value on the program-calculated reference
value for the magnetic current-segment convergence.  Used for the
MVP, the MVP-RSP, and the edge formulation solution options (<em class="replaceable"><code>OPT</code></em> = 0 and 1).  Defaults to 0.001.</p></dd><dt><span><b class="term"><em class="replaceable"><code>CNVFLUX</code></em></b></span></dt><dd><p>Tolerance value on the program-calculated reference
value for the magnetic flux convergence.  Used for all scalar potential
solution options (<em class="replaceable"><code>OPT</code></em> = 2, 3, 4).  Defaults
to 0.001.</p></dd><dt><span><b class="term"><em class="replaceable"><code>NEQIT</code></em></b></span></dt><dd><p>Maximum number of equilibrium iterations per load
step.  Defaults to 25.</p></dd><dt><span><b class="term"><em class="replaceable"><code>BIOT</code></em></b></span></dt><dd><p>Option to force execution of a Biot-Savart integral
solution [<a class="link" href="Hlp_C_BIOT.html" title="BIOT"><span class="command"><strong>BIOT</strong></span></a>,NEW] for the scalar potential options.
 Required if multiple load steps are being performed with different
current source primitives (<a href="../ans_elem/Hlp_E_SOURC36.html" class="olink"><span class="structname">SOURC36</span></a> elements).</p><div><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr valign="top"><td align="right" valign="top"><p><span><b class="term">0</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Do not force execution of Biot-Savart
calculation (default); Biot-Savart is automatically calculated only
for the first solution.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">1</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Force execution of Biot-Savart calculation.</p></td></tr></tbody></table></div></div></dd><dt><span><b class="term"><em class="replaceable"><code>CNVTOL</code></em></b></span></dt><dd><p>Sets the convergence tolerance for AMPS reaction.
Defaults to 1e-3. </p></dd></dl></div></div></div><div class="refsect1" title="Notes"><a name="MAGSOLV.notes"></a><h2>Notes</h2><p><span class="command"><strong>MAGSOLV</strong></span> invokes an ANSYS macro which specifies
magnetic solution options and initiates the solution.  The macro is
applicable to any ANSYS magnetostatic analysis using the magnetic
vector potential (MVP), reduced scalar potential (RSP), difference
scalar potential (DSP), general scalar potential (GSP), or combined
MVP-RSP formulation options.  Results are only stored for the final
converged solution.  (In POST1, issue <a href="Hlp_C_SET_st.html" class="olink"><span class="command"><strong>*SET</strong></span></a>,LIST
to identify the load step of solution results.)  The macro internally
determines if a nonlinear analysis is required based on magnetic material
properties.</p><p>If you use the BIOT option and issue <a class="link" href="Hlp_C_SAVE.html" title="SAVE"><span class="command"><strong>SAVE</strong></span></a> after solution or postprocessing, the Biot-Savart calculations are
saved to the database, but will be overwritten upon normal exit from
the program.  To save this data after issuing <a class="link" href="Hlp_C_SAVE.html" title="SAVE"><span class="command"><strong>SAVE</strong></span></a>, use the <a href="Hlp_C_EXIT.html" class="olink"><span class="command"><strong>/EXIT</strong></span></a>,NOSAVE command.  You can also
issue the <a href="Hlp_C_EXIT.html" class="olink"><span class="command"><strong>/EXIT</strong></span></a>,SOLU command to exit ANSYS and
save all solution data, including the Biot-Savart calculations, in
the database.  Otherwise, when you issue <a class="link" href="Hlp_C_RESUME.html" title="RESUME"><span class="command"><strong>RESUME</strong></span></a>, the Biot-Savart calculation will be lost (resulting in a zero solution).</p><p>The MVP, MVP-RSP, and edge formulation options perform a two-load-step
solution sequence.  The first load step ramps the applied loads over
a prescribed number of substeps (<em class="replaceable"><code>NRAMP</code></em>),
and the second load step calculates the converged solution.  For linear
problems, only a single load step solution is performed.  The ramped
load step can be bypassed by setting <em class="replaceable"><code>NRAMP</code></em> to -1.</p><p>The RSP option solves in a single load step using the adaptive
descent procedure.  The DSP option uses two load steps, and the GSP
solution uses three load steps.</p><p>The following analysis options and nonlinear options are controlled
by this macro:  <a class="link" href="Hlp_C_KBC.html" title="KBC"><span class="command"><strong>KBC</strong></span></a>, <a class="link" href="Hlp_C_NEQIT.html" title="NEQIT"><span class="command"><strong>NEQIT</strong></span></a>, <a class="link" href="Hlp_C_NSUBST.html" title="NSUBST"><span class="command"><strong>NSUBST</strong></span></a>, <a class="link" href="Hlp_C_CNVTOL.html" title="CNVTOL"><span class="command"><strong>CNVTOL</strong></span></a>, <a class="link" href="Hlp_C_NROPT.html" title="NROPT"><span class="command"><strong>NROPT</strong></span></a>, <a class="link" href="Hlp_C_MAGOPT.html" title="MAGOPT"><span class="command"><strong>MAGOPT</strong></span></a>, and <a class="link" href="Hlp_C_OUTRES.html" title="OUTRES"><span class="command"><strong>OUTRES</strong></span></a>.</p><p>You cannot use constraint equations with <em class="replaceable"><code>OPT</code></em> = 4.</p></div><div class="refsect1" title="Menu Paths"><a name="MAGSOLV.menupath"></a><h2>Menu Paths</h2><table border="0" summary="Simple list" class="simplelist"><tr><td><span class="guimenu"><strong>Main Menu&gt;Solution&gt;Solve&gt;Electromagnet&gt;Static Analysis&gt;Opt&amp;Solv</strong></span></td></tr></table></div></div><hr><p class="legalfooter"><small><i>Release 18.2 - &copy; ANSYS, Inc. All rights reserved.</i></small></p></body></html>