<!DOCTYPE html><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta name="date" content="2017-07-14 18:39:53-04:00"><title>NLDIAG</title><link rel="stylesheet" type="text/css" href="basic.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="Hlp_C_CmdTOC.html" title="Mechanical APDL Command Reference"><link rel="up" href="Hlp_N_TOC.html" title="N Commands"><link rel="prev" href="Hlp_C_NLADAPTIVE.html" title="NLADAPTIVE"><link rel="next" href="Hlp_C_NLDPOST.html" title="NLDPOST"><script type="text/javascript"><!--
function toggleElementDisplay (id) {
  var elem = document.getElementById(id);
  if (elem.style.display != "block") {
    elem.style.display = "block";
  } else {
    elem.style.display = "none";
  }
}
//--></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="NLDIAG"><a name="NLDIAG"></a><div class="titlepage"></div><a class="indexterm" name="d0e178138"></a><span class="refentrytitle"><span class="command"><strong>NLDIAG</strong></span></span><div class="refnamediv"><p><span class="command"><strong>NLDIAG</strong></span>, <em class="replaceable"><code>Label</code></em>, <em class="replaceable"><code>Key</code></em>,  <em class="replaceable"><code>MAXFILE</code></em><br><b class="refpurpose">Sets nonlinear diagnostics functionality.</b><div class="refclass"><div class=""><div class="application"><span class="application"><a class="link" href="Hlp_C_CH2_6.html" title="2.6.&nbsp;SOLUTION Commands"><code class="classname">SOLUTION</code></a>: <a class="link" href="Hlp_C_CH2_6.html#cmdsolunonlinjla070199" title="Table&nbsp;2.50:&nbsp;&nbsp;Nonlinear Options"><span class="type">Nonlinear Options</span></a></span></div></div></div><div class="refclass"><div class=""><div class="application"><span class="application"><a href="Hlp_C_CH1_2_1.html#aIcomd24mcm" class="olink">Compatible Products:</a>  DesSpc | Pro | Premium | Enterprise | Ent PP | Ent Solver | &#8211;</span></div></div></div></p></div><div class="refsynopsisdiv" title="Synopsis"><a name="NLDIAG.argdescript"></a><h2></h2><div><div class="variablelist"><dl><dt><span><b class="term"><em class="replaceable"><code>Label</code></em></b></span></dt><dd><p>Diagnostic function:</p><div><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr valign="top"><td align="right" valign="top"><p><span><b class="term">NRRE</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Store the Newton-Raphson residuals
information.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">EFLG</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Identify or display elements or nodes
that violate the criteria.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">CONT</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Write contact information to a single <span class="filename"><strong>Jobname.cnd</strong></span> diagnostic text file during solution.</p></td></tr></tbody></table></div></div></dd><dt><span><b class="term"><em class="replaceable"><code>Key</code></em></b></span></dt><dd><p>Diagnostic function characteristics:</p><div><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr valign="top"><td align="right" valign="top"><p><span><b class="term">OFF or 0</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Suppresses writing of diagnostic
information (default).</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">ON or 1</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Writes diagnostic information
to the <span class="filename"><strong>Jobname.nd<em class="replaceable"><code>xxx</code></em></strong></span>, <span class="filename"><strong>Jobname.nr<em class="replaceable"><code>xxx</code></em></strong></span>,
or <span class="filename"><strong>Jobname.cnd</strong></span> file. (If <em class="replaceable"><code>Label</code></em> = CONT, this option is the same as the SUBS option described below.)</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">ITER </b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Writes contact diagnostic information
at each iteration. Valid only when <em class="replaceable"><code>Label</code></em> = CONT.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">SUBS </b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Writes contact diagnostic information
at each substep. Valid only when <em class="replaceable"><code>Label</code></em> =
CONT.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">LSTP </b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Writes contact diagnostic information
at each load step. Valid only when <em class="replaceable"><code>Label</code></em> = CONT.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">STAT</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Lists information about the diagnostic
files in the current working directory.</p></td></tr><tr valign="top"><td align="right" valign="top"><p><span><b class="term">DEL</b></span></p></td><td valign="center"><p>&nbsp;&#8212;&nbsp;</p></td><td><p>Deletes all diagnostic files in the
current working directory.</p></td></tr></tbody></table></div></div></dd><dt><span><b class="term"><em class="replaceable"><code>MAXFILE</code></em></b></span></dt><dd><p>Maximum number of diagnostic files to create. Valid
values are 1 through 999. Default = 4. Valid only when <em class="replaceable"><code>Label</code></em> = NRRE or EFLG.</p><p>Information is written
to <span class="filename"><strong>Jobname.nd<em class="replaceable"><code>xxx</code></em></strong></span> or <span class="filename"><strong>Jobname.nr<em class="replaceable"><code>xxx</code></em></strong></span>, where <em class="replaceable"><code>xxx</code></em> iterates from 001 through <em class="replaceable"><code>MAXFILE</code></em>. When the specified maximum number of diagnostic files is reached,
the counter resets to 001 and earlier files are overwritten. The <em class="replaceable"><code>MAXFILE</code></em> value specified for this <em class="replaceable"><code>Label</code></em> function applies until a new value is specified.</p></dd></dl></div></div></div><div class="refsect1" title="Command Default"><a name="NLDIAG.default"></a><h2>Command Default</h2><p>No nonlinear diagnostic files are written.</p></div><div class="refsect1" title="Notes"><a name="NLDIAG.notes"></a><h2>Notes</h2><p>The <span class="command"><strong>NLDIAG</strong></span> command is a <a href="../ans_str/Hlp_G_STR8_12.html#strnonlindiag" class="olink">nonlinear diagnostics</a> tool valid for <span>nonlinear analyses that include structural degrees of freedom.</span>
   It is a debugging tool for use when you must restart after an unconverged solution. The command
   creates <span class="filename"><strong>Jobname.nd<em class="replaceable"><code>xxx</code></em></strong></span>,
     <span class="filename"><strong>Jobname.nr<em class="replaceable"><code>xxx</code></em></strong></span>, or
    <span class="filename"><strong>Jobname.cnd</strong></span> files in the working directory to store the information you
   specify.</p><p>For more information, see <a href="../ans_str/Hlp_G_STR8_12.html#strnonlindiag" class="olink">Performing Nonlinear Diagnostics</a>. </p><div class="refsect2" title="Newton-Raphson Residual"><a name="d0e178349"></a><h3>Newton-Raphson Residual</h3><p>Issue the <span class="command"><strong>NLDIAG</strong></span>,NRRE,ON command to create <span class="filename"><strong>Jobname.nr<em class="replaceable"><code>xxx</code></em></strong></span> diagnostic files
(for each equilibrium iteration after the first) in which to store
the relevant Newton-Raphson residual information of forces/moments
Fx, Fy, Fz, Mx, My and Mz for the last <em class="replaceable"><code>MAXFILE</code></em> equilibrium iterations. </p><p>Issue a <a class="link" href="Hlp_C_NLDPOST.html" title="NLDPOST"><span class="command"><strong>NLDPOST</strong></span></a>,NRRE,STAT command to list
the load step, substep, time, and equilibrium iteration corresponding
to each of the <span class="filename"><strong>Jobname.nr<em class="replaceable"><code>xxx</code></em></strong></span> diagnostic files in the working directory, then issue a <a class="link" href="Hlp_C_PLNSOL.html" title="PLNSOL"><span class="command"><strong>PLNSOL</strong></span></a>,NRRES,,,,<em class="replaceable"><code>FileID</code></em> command
to point to the file from which you want to create a contour plot
of your Newton-Raphson residuals.</p><p>If you restart or issue a new <a class="link" href="Hlp_C_SOLVE.html" title="SOLVE"><span class="command"><strong>SOLVE</strong></span></a> command,
any <span class="filename"><strong>Jobname.nr<em class="replaceable"><code>xxx</code></em></strong></span> diagnostic
files in the current (working) directory are overwritten.</p></div><div class="refsect2" title="Element Components That Violate Criteria"><a name="d0e178394"></a><h3>Element Components That Violate Criteria</h3><p>Issue a <span class="command"><strong>NLDIAG</strong></span>,EFLG,ON command to create <span class="filename"><strong>Jobname.nd<em class="replaceable"><code>xxx</code></em></strong></span>  diagnostic files
which store IDs for elements violating the following criteria:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Too large a distortion (HDST)</p></li><li class="listitem"><p>Elements contain nodes that have near zero pivots
(PIVT) for nonlinear analyses</p></li><li class="listitem"><p>Too large a plastic/creep (EPPL/EPCR) strain increment
(<a class="link" href="Hlp_C_CUTCONTROL.html" title="CUTCONTROL"><span class="command"><strong>CUTCONTROL</strong></span></a>)</p></li><li class="listitem"><p>Elements for which mixed u-P constraints are not satisfied
(mixed U-P option of 18<em class="replaceable"><code>x</code></em> solid elements
only) (MXUP)</p></li><li class="listitem"><p>Hyperelastic element (EPHY), cohesive zone material
(EPCZ), or damage strain (EPDM) not converged</p></li><li class="listitem"><p>Radial displacement (RDSP) not converged</p></li><li class="listitem"><p><a href="../ans_elem/Hlp_E_MPC184.html" class="olink"><span class="structname">MPC184</span></a> multipoint constraint
elements using KEYOPT(1) = 6 through 16 with the Lagrange multiplier
option fail to satisfy constraint conditions (184J)</p></li></ul></div><p>For <span class="command"><strong>NLDIAG</strong></span>,EFLG,ON, all <span class="filename"><strong>Jobname.nd<em class="replaceable"><code>xxx</code></em></strong></span> diagnostic files (for each equilibrium
iteration after the first) in the current (working) directory are
deleted when you issue a new <a class="link" href="Hlp_C_SOLVE.html" title="SOLVE"><span class="command"><strong>SOLVE</strong></span></a> command (or
restart).</p><p>In the solution processor (<a href="Hlp_C_SOLU_sl.html" class="olink"><span class="command"><strong>/SOLU</strong></span></a>), use the
STAT option to list the active status of this command. In the postprocessor
(<a href="Hlp_C_POST1.html" class="olink"><span class="command"><strong>/POST1</strong></span></a>), issue a <a class="link" href="Hlp_C_NLDPOST.html" title="NLDPOST"><span class="command"><strong>NLDPOST</strong></span></a>,EFLG,STAT
command to list the load step, substep, time, and equilibrium iteration
corresponding to each of the <span class="filename"><strong>Jobname.nd<em class="replaceable"><code>xxx</code></em></strong></span> diagnostic files in the working directory, then issue
a <a class="link" href="Hlp_C_NLDPOST.html" title="NLDPOST"><span class="command"><strong>NLDPOST</strong></span></a>,EFLG,CM,<em class="replaceable"><code>FileID</code></em> command to create element components that violate the criteria. </p></div><div class="refsect2" title="Contact Diagnostic"><a name="d0e178479"></a><h3>Contact Diagnostic</h3><p>Issue the <span class="command"><strong>NLDIAG</strong></span>,CONT,ON command to create
a <span class="filename"><strong>Jobname.cnd</strong></span> diagnostic file which stores contact
information for all defined contact pairs at all substeps. Alternatively,
you may issue one of the following commands to store contact information
at a specific frequency:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="command"><strong>NLDIAG</strong></span>,CONT,ITER to write at each
iteration</p></li><li class="listitem"><p><span class="command"><strong>NLDIAG</strong></span>,CONT,SUBS to write at each
substep (default)</p></li><li class="listitem"><p><span class="command"><strong>NLDIAG</strong></span>,CONT,LSTP to write at each
load step</p></li></ul></div><p>Contact diagnostic information is available for elements <a href="../ans_elem/Hlp_E_CONTA171.html" class="olink"><span class="structname">CONTA171</span></a> through <a href="../ans_elem/Hlp_E_CONTA177.html" class="olink"><span class="structname">CONTA177</span></a>;
it is not available for <a href="../ans_elem/Hlp_E_CONTA178.html" class="olink"><span class="structname">CONTA178</span></a>.</p><p>Diagnostic file <span class="filename"><strong>Jobname.cnd</strong></span> is written
during solution and lists, on a pair-base, the following contact information:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Contact pair ID<a class="link" href="Hlp_C_NLDIAG.html#NLDIAGfootnt1"><sup>[1]</sup></a></p></li><li class="listitem"><p>Number of contact elements in contact<a class="link" href="Hlp_C_NLDIAG.html#NLDIAGfootnt2"><sup>[2]</sup></a></p></li><li class="listitem"><p>Number of contact elements in <span class="quote">"<span class="quote">sticking</span>"</span> contact status</p></li><li class="listitem"><p>Maximum chattering level</p></li><li class="listitem"><p>Maximum contact penetration/Minimum gap<a class="link" href="Hlp_C_NLDIAG.html#NLDIAGfootnt3"><sup>[3]</sup></a></p></li><li class="listitem"><p>Maximum closed gap</p></li><li class="listitem"><p>Maximum normal contact stiffness</p></li><li class="listitem"><p>Minimum normal contact stiffness</p></li><li class="listitem"><p>Maximum resulting pinball</p></li><li class="listitem"><p>Maximum elastic slip distance</p></li><li class="listitem"><p>Maximum tangential contact stiffness</p></li><li class="listitem"><p>Minimum tangential contact stiffness</p></li><li class="listitem"><p>Maximum sliding distance</p></li><li class="listitem"><p>Maximum contact pressure</p></li><li class="listitem"><p>Maximum friction stress</p></li><li class="listitem"><p>Average contact depth</p></li><li class="listitem"><p>Maximum closed penetration</p></li><li class="listitem"><p>Number of contact points having too much penetration</p></li><li class="listitem"><p>Contacting area</p></li><li class="listitem"><p>Maximum contact damping pressure</p></li><li class="listitem"><p>Maximum tangential contact damping stress</p></li><li class="listitem"><p>Maximum total sliding distance (<a href="../ans_ctec/Hlp_ctec_revresu.html#ctecpostslide" class="olink">GSLID</a>), including
near-field</p></li><li class="listitem"><p>Minimum total sliding distance (<a href="../ans_ctec/Hlp_ctec_revresu.html#ctecpostslide" class="olink">GSLID</a>), including
near-field</p></li><li class="listitem"><p>Maximum fluid penetration pressure on contact surface</p></li><li class="listitem"><p>Maximum fluid penetration pressure on target surface</p></li><li class="listitem"><p>Total volume lost due to wear for the contact pair</p></li><li class="listitem"><p>Total strain energy due to contact constraint</p></li><li class="listitem"><p>Total frictional dissipation energy</p></li><li class="listitem"><p>Total contact stabilization energy</p></li><li class="listitem"><p>ANSYS Workbench contact pair ID<a class="link" href="Hlp_C_NLDIAG.html#NLDIAGfootnt4"><sup>[4]</sup></a></p></li><li class="listitem"><p>Total force due to contact pressure - X component</p></li><li class="listitem"><p>Total force due to contact pressure - Y component</p></li><li class="listitem"><p>Total force due to contact pressure - Z component<a class="link" href="Hlp_C_NLDIAG.html#NLDIAGfootnt5"><sup>[5]</sup></a></p></li><li class="listitem"><p>Total force due to tangential stress - X component</p></li><li class="listitem"><p>Total force due to tangential stress - Y component</p></li><li class="listitem"><p>Total force due to tangential stress - Z component</p></li></ul></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a name="NLDIAGfootnt1"></a>Contact pair ID. A positive number
refers to a real constant ID for a pair-based contact definition.
A negative number refers to a section ID of a surface in a general
contact definition. (See <a href="../ans_ctec/ctec_comppairgen.html" class="olink">Comparison of Pair-Based Contact and General Contact</a>.)</p></li><li class="listitem"><p><a name="NLDIAGfootnt2"></a>Number of contact elements in contact.
Other values are interpreted as follows:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>0 indicates that the contact pair is in near-field contact
status.</td></tr><tr><td>-1 indicates that the contact pair is in far-field contact
status.</td></tr><tr><td>-2 indicates that the contact pair is inactive (<a href="../ans_ctec/Hlp_ctec_dessurf.html#usekeyopt8" class="olink">symmetric to asymmetric
contact</a>).</td></tr></table></li><li class="listitem"><p><a name="NLDIAGfootnt3"></a>A positive value indicates penetration
and a negative value indicates a gap. If the contact pair has a far-field
contact status, penetration and gap are not available and the value
stored is the current pinball radius.</p></li><li class="listitem"><p><a name="NLDIAGfootnt4"></a>Intended primarily for internal
use in the contact tracking of ANSYS Workbench.</p></li><li class="listitem"><p><a name="NLDIAGfootnt5"></a>In a 3-D model, the reported item is total force along the Z-axis. In a 2-D axisymmetric
      model, the reported item is maximum torque that can potentially act on the Y-axis. </p></li></ol></div><p>In the solution processor (<a href="Hlp_C_SOLU_sl.html" class="olink"><span class="command"><strong>/SOLU</strong></span></a>), use the <span class="command"><strong>NLDIAG</strong></span>,CONT,STAT command to list the active status of the
contact information. If you subsequently issue a new <a class="link" href="Hlp_C_SOLVE.html" title="SOLVE"><span class="command"><strong>SOLVE</strong></span></a> command (or restart), the <span class="filename"><strong>Jobname.cnd</strong></span> diagnostic
file in the current (working) directory is not deleted; information
is appended to it. Delete the existing diagnostic file (<span class="command"><strong>NLDIAG</strong></span>,CONT,DEL command) if you do not want to retain diagnostic information
from previous solutions.</p></div></div><div class="refsect1" title="Menu Paths"><a name="NLDIAG.menupath"></a><h2>Menu Paths</h2><table border="0" summary="Simple list" class="simplelist"><tr><td><span class="guimenu"><strong>Main Menu&gt;Solution&gt;Diagnostics&gt;Nonlinear Diagnostics</strong></span></td></tr></table></div></div><hr><p class="legalfooter"><small><i>Release 18.2 - &copy; ANSYS, Inc. All rights reserved.</i></small></p></body></html>